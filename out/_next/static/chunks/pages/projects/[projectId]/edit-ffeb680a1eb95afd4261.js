_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[68],{"D/BJ":function(e,t,r){"use strict";var n=r("vJKn"),a=r.n(n),c=r("nKUr"),o=r("cpVT"),i=r("rg98"),s=r("xvhg"),l=r("dhJC"),u=r("q1tI"),j=r.n(u),d=r("vDqi"),b=r.n(d),p=r("ADg1"),O=r("r9w1"),m=r("iae6"),h=r("Spdj"),f=r("+bXu"),x=r("NKCw"),g=r("eRyV");function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.a=function(e){var t=e.name,r=e.label,n=void 0===r?"":r,o=e.errorObj,u=void 0===o?{}:o,d=Object(l.a)(e,["name","label","errorObj"]),v=Object(x.useFormContext)().control,w=Object(x.useController)({name:t,control:v}).field,P=w.ref,S=w.onChange,k=Object(l.a)(w,["ref","onChange"]),C=j.a.useState(!1),N=Object(s.a)(C,2),E=N[0],I=N[1],D=j.a.useState([]),q=Object(s.a)(D,2),T=q[0],R=q[1],M=j.a.useState(!1),A=Object(s.a)(M,2),L=A[0],U=A[1],W=Object(g.a)(t,u),z=W.isError,B=W.errorMessage;function F(){return(F=Object(i.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(!0),e.next=3,b.a.get("".concat("http://localhost:1337","/poqs?_where[isDeleted]=0"));case 3:r=e.sent,R(r.data.map((function(e){return{id:e.id,name:e.Name,customer:e.customer.firstName+" "+e.customer.lastName,customerId:e.customer.id,grandtotal:e.grandTotal,shippingAddress:e.shippingAddress,shippingcost:e.shippingCost,othercost:e.otherCost,vat:e.vat,productTotalCost:e.productTotalcost,subtotal:e.subtotal,totaldiscount:e.totalDiscount,profit:e.profit,dollarTransferRate:e.dollarTransferRate,euroTransferRate:e.euroTransferRate}}))),U(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return j.a.useEffect((function(){E||R([])}),[E]),Object(c.jsxs)(p.a,{fullWidth:!0,error:z,children:[Object(c.jsx)(f.a,y(y({},k),{},{ref:P,open:E,options:T,loading:L,onOpen:function(){return I(!0)},onClose:function(){return I(!1)},onChange:function(e,t){S(t)},getOptionLabel:function(e){return e.name},getOptionSelected:function(e,t){return e.name==t.name},renderOption:function(e){return Object(c.jsx)("span",{children:e.name})},renderInput:function(e){return Object(c.jsx)(O.a,y(y({},e),{},{label:n,variant:"outlined",error:z,onChange:function(e){return function(e){return F.apply(this,arguments)}(e.target.value)},InputProps:y(y({},e.InputProps),{},{endAdornment:Object(c.jsxs)(c.Fragment,{children:[L?Object(c.jsx)(m.a,{size:25}):null,e.InputProps.endAdornment]})})}))}},d)),z&&Object(c.jsx)(h.a,{error:!0,children:B})]})}},Gw4x:function(e,t,r){"use strict";var n=r("nKUr"),a=r("q1tI"),c=r("R/WZ"),o=r("hlFM"),i=r("de8u"),s=r("Mj6V"),l=r.n(s),u=Object(c.a)((function(e){return{root:{alignItems:"center",backgroundColor:e.palette.background.default,display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",minHeight:"100%",padding:e.spacing(3)}}}));t.a=function(){var e=u();return Object(a.useEffect)((function(){return l.a.start(),function(){l.a.done()}}),[]),Object(n.jsx)("div",{className:e.root,children:Object(n.jsx)(o.a,{width:400,children:Object(n.jsx)(i.a,{})})})}},L3CC:function(e,t,r){"use strict";var n=r("nKUr"),a=r("cpVT"),c=r("dhJC"),o=r("R/WZ"),i=r("ye/S"),s=r("iuhU");function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j=Object(o.a)((function(e){return{root:{fontFamily:e.typography.fontFamily,alignItems:"center",borderRadius:2,display:"inline-flex",flexGrow:0,whiteSpace:"nowrap",cursor:"default",flexShrink:0,fontSize:e.typography.pxToRem(12),fontWeight:e.typography.fontWeightMedium,height:20,justifyContent:"center",letterSpacing:.5,minWidth:20,padding:e.spacing(.5,1),textTransform:"uppercase"},primary:{color:e.palette.primary.main,backgroundColor:Object(i.c)(e.palette.primary.main,.08)},secondary:{color:e.palette.secondary.main,backgroundColor:Object(i.c)(e.palette.secondary.main,.08)},error:{color:e.palette.error.main,backgroundColor:Object(i.c)(e.palette.error.main,.08)},success:{color:e.palette.success.main,backgroundColor:Object(i.c)(e.palette.success.main,.08)},warning:{color:e.palette.warning.main,backgroundColor:Object(i.c)(e.palette.warning.main,.08)}}}));t.a=function(e){var t=e.className,r=void 0===t?"":t,o=e.color,i=void 0===o?"secondary":o,l=e.children,d=Object(c.a)(e,["className","color","children"]),b=j();return Object(n.jsx)("span",u(u({className:Object(s.a)(b.root,Object(a.a)({},b[i],i),r)},d),{},{children:l}))}},Mj6V:function(e,t,r){var n,a;void 0===(a="function"===typeof(n=function(){var e={version:"0.2.0"},t=e.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function r(e,t,r){return e<t?t:e>r?r:e}function n(e){return 100*(-1+e)}function a(e,r,a){var c;return(c="translate3d"===t.positionUsing?{transform:"translate3d("+n(e)+"%,0,0)"}:"translate"===t.positionUsing?{transform:"translate("+n(e)+"%,0)"}:{"margin-left":n(e)+"%"}).transition="all "+r+"ms "+a,c}e.configure=function(e){var r,n;for(r in e)void 0!==(n=e[r])&&e.hasOwnProperty(r)&&(t[r]=n);return this},e.status=null,e.set=function(n){var i=e.isStarted();n=r(n,t.minimum,1),e.status=1===n?null:n;var s=e.render(!i),l=s.querySelector(t.barSelector),u=t.speed,j=t.easing;return s.offsetWidth,c((function(r){""===t.positionUsing&&(t.positionUsing=e.getPositioningCSS()),o(l,a(n,u,j)),1===n?(o(s,{transition:"none",opacity:1}),s.offsetWidth,setTimeout((function(){o(s,{transition:"all "+u+"ms linear",opacity:0}),setTimeout((function(){e.remove(),r()}),u)}),u)):setTimeout(r,u)})),this},e.isStarted=function(){return"number"===typeof e.status},e.start=function(){e.status||e.set(0);var r=function(){setTimeout((function(){e.status&&(e.trickle(),r())}),t.trickleSpeed)};return t.trickle&&r(),this},e.done=function(t){return t||e.status?e.inc(.3+.5*Math.random()).set(1):this},e.inc=function(t){var n=e.status;return n?("number"!==typeof t&&(t=(1-n)*r(Math.random()*n,.1,.95)),n=r(n+t,0,.994),e.set(n)):e.start()},e.trickle=function(){return e.inc(Math.random()*t.trickleRate)},function(){var t=0,r=0;e.promise=function(n){return n&&"resolved"!==n.state()?(0===r&&e.start(),t++,r++,n.always((function(){0===--r?(t=0,e.done()):e.set((t-r)/t)})),this):this}}(),e.render=function(r){if(e.isRendered())return document.getElementById("nprogress");s(document.documentElement,"nprogress-busy");var a=document.createElement("div");a.id="nprogress",a.innerHTML=t.template;var c,i=a.querySelector(t.barSelector),l=r?"-100":n(e.status||0),u=document.querySelector(t.parent);return o(i,{transition:"all 0 linear",transform:"translate3d("+l+"%,0,0)"}),t.showSpinner||(c=a.querySelector(t.spinnerSelector))&&j(c),u!=document.body&&s(u,"nprogress-custom-parent"),u.appendChild(a),a},e.remove=function(){l(document.documentElement,"nprogress-busy"),l(document.querySelector(t.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&j(e)},e.isRendered=function(){return!!document.getElementById("nprogress")},e.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var c=function(){var e=[];function t(){var r=e.shift();r&&r(t)}return function(r){e.push(r),1==e.length&&t()}}(),o=function(){var e=["Webkit","O","Moz","ms"],t={};function r(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(e,t){return t.toUpperCase()}))}function n(t){var r=document.body.style;if(t in r)return t;for(var n,a=e.length,c=t.charAt(0).toUpperCase()+t.slice(1);a--;)if((n=e[a]+c)in r)return n;return t}function a(e){return e=r(e),t[e]||(t[e]=n(e))}function c(e,t,r){t=a(t),e.style[t]=r}return function(e,t){var r,n,a=arguments;if(2==a.length)for(r in t)void 0!==(n=t[r])&&t.hasOwnProperty(r)&&c(e,r,n);else c(e,a[1],a[2])}}();function i(e,t){return("string"==typeof e?e:u(e)).indexOf(" "+t+" ")>=0}function s(e,t){var r=u(e),n=r+t;i(r,t)||(e.className=n.substring(1))}function l(e,t){var r,n=u(e);i(e,t)&&(r=n.replace(" "+t+" "," "),e.className=r.substring(1,r.length-1))}function u(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function j(e){e&&e.parentNode&&e.parentNode.removeChild(e)}return e})?n.call(t,r,t,e):n)||(e.exports=a)},Txxr:function(e,t,r){"use strict";var n=r("q1tI");t.a=function(){var e=Object(n.useRef)(!0);return Object(n.useEffect)((function(){return function(){e.current=!1}}),[]),e}},"Y8H/":function(e,t,r){"use strict";var n=r("nKUr"),a=r("cpVT"),c=r("dhJC"),o=r("ADg1"),i=r("r9w1"),s=r("Spdj"),l=r("+bXu"),u=r("NKCw"),j=r("eRyV");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.a=function(e){var t=e.name,r=e.label,a=void 0===r?"":r,d=e.options,p=e.errorObj,O=void 0===p?{}:p,m=Object(c.a)(e,["name","label","options","errorObj"]),h=Object(u.useFormContext)().control,f=Object(u.useController)({name:t,control:h}).field,x=f.ref,g=f.onChange,v=Object(c.a)(f,["ref","onChange"]),y=Object(j.a)(t,O),w=y.isError,P=y.errorMessage;return Object(n.jsxs)(o.a,{fullWidth:!0,error:w,children:[Object(n.jsx)(l.a,b(b({},v),{},{ref:x,options:d,onChange:function(e,t){return g(t)},getOptionLabel:function(e){return e.label},getOptionSelected:function(e,t){return e.value==t.value},renderOption:function(e){return Object(n.jsx)("span",{children:e.label})},renderInput:function(e){return Object(n.jsx)(i.a,b(b({},e),{},{label:a,variant:"outlined",error:w}))}},m)),w&&Object(n.jsx)(s.a,{error:!0,children:P})]})}},YnhM:function(e,t,r){"use strict";var n=r("q1tI"),a=r.n(n),c=r("17x9"),o=r.n(c);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=Object(n.forwardRef)((function(e,t){var r=e.color,n=void 0===r?"currentColor":r,c=e.size,o=void 0===c?24:c,l=s(e,["color","size"]);return a.a.createElement("svg",i({ref:t,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),a.a.createElement("polyline",{points:"6 9 6 2 18 2 18 9"}),a.a.createElement("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),a.a.createElement("rect",{x:"6",y:"14",width:"12",height:"8"}))}));l.propTypes={color:o.a.string,size:o.a.oneOfType([o.a.string,o.a.number])},l.displayName="Printer",t.a=l},sU1k:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/projects/[projectId]/edit",function(){return r("tHOI")}])},tHOI:function(e,t,r){"use strict";r.r(t);var n=r("vJKn"),a=r.n(n),c=r("rg98"),o=r("nKUr"),i=r("xvhg"),s=r("q1tI"),l=r.n(s),u=r("R/WZ"),j=r("Ji2X"),d=r("hlFM"),b=r("dfam"),p=r("JrkS"),O=r("wb2y"),m=r("NKQG"),h=r("vDqi"),f=r.n(h),x=r("Gw4x"),g=r("20a2"),v=r("sxe4"),y=r("79WI"),w=r("Mya6"),P=r("1DBx"),S=r("z7pX"),k=r("cpVT"),C=r("dhJC"),N=r("tRbT"),E=r("30+C"),I=r("50B7"),D=r("oa/T"),q=r("ofer"),T=r("Z3vd"),R=r("PsDL"),M=r("HR5l"),A=r("Spdj"),L=r("iae6"),U=r("bgvd"),W=r("iuhU"),z=r("Rzx/"),B=r("NKCw"),F=r("UGp+"),V=r("Y8H/"),_=r("MMHs"),K=r("sn/O"),J=r("k80k"),H=r("D/BJ"),G=r("XNQK"),Q=r("wvod"),X=r("/EAt"),Z=r("Imu7"),Y=r("sRsu"),$=r("3PeG"),ee=r("VmPI"),te=r("Uf6+"),re=r("r9w1"),ne=r("ELmG"),ae=r("KcsI"),ce=r("cuOD"),oe=r.n(ce),ie=r("2Wm+"),se=r("IIOH"),le=r("1NhI"),ue=r("JoNN"),je=r("wHH0");function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){Object(k.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var pe=Object(u.a)((function(e){return{root:{padding:e.spacing(2)},actions:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > * + *":{marginLeft:e.spacing(2)}}}}));var Oe=function(e){var t=e.className,r=e.onDelete,n=void 0===r?function(){}:r,a=e.onMarkActive,c=void 0===a?function(){}:a,i=e.onMarkInactive,s=void 0===i?function(){}:i,l=e.open,u=void 0!==l&&l,j=e.selected,d=e.isLoading,b=void 0!==d&&d,p=Object(C.a)(e,["className","onDelete","onMarkActive","onMarkInactive","open","selected","isLoading"]),O=pe();return Object(o.jsx)(se.a,{anchor:"bottom",open:u,PaperProps:{elevation:1},variant:"persistent",children:Object(o.jsx)("div",be(be({className:Object(W.a)(O.root,t)},p),{},{children:Object(o.jsxs)(N.a,{alignItems:"center",container:!0,spacing:2,children:[Object(o.jsx)(le.a,{smDown:!0,children:Object(o.jsx)(N.a,{item:!0,md:3,children:Object(o.jsxs)(q.a,{color:"textSecondary",variant:"subtitle1",children:[j.length," selected"]})})}),Object(o.jsx)(N.a,{item:!0,md:6,xs:12,children:Object(o.jsx)("div",{className:O.actions,children:b?Object(o.jsx)(L.a,{}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(T.a,{onClick:c,startIcon:Object(o.jsx)(M.a,{fontSize:"small",children:Object(o.jsx)(ue.a,{})}),children:"Mark Active"}),Object(o.jsx)(T.a,{onClick:s,startIcon:Object(o.jsx)(M.a,{fontSize:"small",children:Object(o.jsx)(je.a,{})}),children:"Mark Inactive"}),Object(o.jsx)(T.a,{onClick:n,startIcon:Object(o.jsx)(M.a,{fontSize:"small",children:Object(o.jsx)(ae.a,{})}),children:"Delete"})]})})})]})}))})};function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){Object(k.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fe=Object(u.a)((function(){return{root:{}}}));var xe=function(e){var t=e.className,r=e.query,n=e.setproject,a=e.transferRate,c=Object(C.a)(e,["className","query","setproject","transferRate"]),s=fe(),u=Object(m.b)().enqueueSnackbar,j=l.a.useState(!1),b=Object(i.a)(j,2),p=b[0],O=(b[1],Object(ie.a)({query:r})),h=O.selectedItems,x=O.isAllItemsSelected,g=O.isSomeItemsSelected,v=O.page,y=O.limit,w=O.hasNext,P=O.hasPrev,S=O.isLoading,k=(O.setItems,O.setSelectedItems,O.enableBulkOperations),N=O.handleSelectAllItems,I=O.handleSelectOneItem,D=O.handlePageChange,q=O.handleLimitChange;return Object(o.jsxs)("div",he(he({className:Object(W.a)(s.root,t)},c),{},{children:[Object(o.jsxs)(E.a,{children:[Object(o.jsx)(oe.a,{children:Object(o.jsx)(d.a,{minWidth:700,children:Object(o.jsxs)(X.a,{children:[Object(o.jsx)(Z.a,{children:Object(o.jsxs)(Y.a,{children:[Object(o.jsx)($.a,{padding:"checkbox",children:Object(o.jsx)(ee.a,{checked:x,indeterminate:g,onChange:N})}),Object(o.jsx)($.a,{children:"Part #"}),Object(o.jsx)($.a,{children:"Quantity"}),Object(o.jsx)($.a,{children:"Price "}),Object(o.jsx)($.a,{children:"Currency"}),Object(o.jsx)($.a,{children:"Discount (%)"}),Object(o.jsx)($.a,{children:"Sale Percentage (%)"}),Object(o.jsx)($.a,{children:"Sale price "}),Object(o.jsx)($.a,{align:"right",children:"Actions"})]})}),S?Object(o.jsx)(d.a,{display:"flex",justifyContent:"center",mt:4,children:Object(o.jsx)(L.a,{})}):Object(o.jsx)(te.a,{children:r.projectdetail.map((function(e){var t=h.includes(e.id);return Object(o.jsxs)(Y.a,{hover:!0,selected:-1!==h.indexOf(e.id),children:[Object(o.jsx)($.a,{padding:"checkbox",children:Object(o.jsx)(ee.a,{checked:t,onChange:function(t){return I(t,e.id)},value:t})}),Object(o.jsx)($.a,{style:{textAlign:"center"},children:e.product.partNumber}),Object(o.jsx)($.a,{style:{width:"10%"},children:Object(o.jsx)(re.a,{type:"number",name:"qnty".concat(e.id),variant:"outlined",value:e.qnty,style:{textAlign:"center"},onChange:function(t){e.qnty=Number(t.target.value),n(he({},r))}})}),Object(o.jsx)($.a,{children:e.EndUserPrice}),Object(o.jsx)($.a,{children:function(){switch(e.product.currency){case 1:return"EGP";case 2:return"USD";case 3:return"EUR"}}()}),Object(o.jsx)($.a,{children:e.product.discount}),Object(o.jsx)($.a,{style:{width:"20%"},children:Object(o.jsx)(re.a,{type:"number",name:"salepercent".concat(e.id),variant:"outlined",value:e.saleprecentage,style:{width:"60%"},onChange:function(t){e.SalePrice=e.EndUserPrice*Number(t.target.value)/100+e.EndUserPrice,e.saleprecentage=Number(t.target.value),n(he({},r))}})}),Object(o.jsx)($.a,{children:function(){if(e.saleprice){if(2==e.product.currency)return e.SalePrice*a.usd;if(3==e.product.currency)return e.SalePrice*a.eur}else{if(2==e.product.currency)return e.EndUserPrice*a.usd;if(3==e.product.currency)return e.EndUserPrice*a.eur}}()}),Object(o.jsx)($.a,{align:"right",children:Object(o.jsx)(R.a,{onClick:function(){return t=e.id,void f.a.delete("".concat("http://localhost:1337","/project-details/").concat(t)).then((function(){n(he(he({},r),{},{projectdetail:r.projectdetail.filter((function(e){return e.id!=t}))})),u("deleted",{variant:"error"})}));var t},children:Object(o.jsx)(M.a,{fontSize:"small",children:Object(o.jsx)(ae.a,{})})})})]},e.id)}))})]})})}),Object(o.jsx)(ne.a,{component:"div",count:-1,onChangePage:D,onChangeRowsPerPage:q,page:v,rowsPerPage:y,rowsPerPageOptions:[5,10,25],nextIconButtonProps:{disabled:!w},backIconButtonProps:{disabled:!P},labelDisplayedRows:function(e){var t=e.from;return 0==r.length?"0-0":"".concat(t,"-").concat(t+r.length-1)}})]}),Object(o.jsx)(Oe,{open:k,selected:h,isLoading:p,onMarkActive:function(){},onMarkInactive:function(){},onDelete:function(){}})]}))};function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach((function(t){Object(k.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ye=Object(u.a)((function(e){return{root:{},editor:{"& .ql-editor":{height:400}},addProduct:{marginLeft:e.spacing(2)}}})),we=[{label:"Negotiation",value:"Negotiation"},{label:"Signed",value:"Signed"},{label:"Inprogress",value:"Inprogress"},{label:"Finished",value:"Finished"}],Pe=F.c().shape({projectName:F.e().max(255).required("Required."),customerName:F.c().shape({id:F.b().nullable(),name:F.e().nullable()}).nullable().required("Cutomer name is required"),poqNumber:F.c().shape({id:F.b().nullable,name:F.e().nullable(),customer:F.e().nullable(),customerId:F.b().nullable(),grandtotal:F.b().nullable()}).nullable().required("BOQ name is required"),scope:F.c().nullable().required("Project scope is required"),status:F.c().shape({lable:F.e().nullable(),value:F.e().nullable()}).nullable().required("Project status is required"),startDate:F.a().nullable().typeError("Invalid date.").required("Required."),endDate:F.a().nullable().typeError("Invalid date.").required("Required."),shippingAddress:F.e().max(255),shippingCost:F.b().nullable(),otherCosts:F.b(),totaldiscount:F.b(),vatpercentage:F.b(),productQty:F.b().nullable(),productName:F.c().shape({id:F.b().nullable(),name:F.e().nullable()}).nullable(),downPayment:F.b().required("Required."),upponSupply:F.b().required("Required."),upponComission:F.b().required("Required."),dollar:F.b().nullable(),euro:F.b().nullable()});var Se=function(e){var t=e.className,r=e.project,n=e.setproject,s=Object(C.a)(e,["className","project","setproject"]),u=ye(),j=Object(m.b)().enqueueSnackbar,b=l.a.useState(r.project.productTotalCost),p=Object(i.a)(b,2),h=p[0],x=p[1],g=l.a.useState({subtotal:r.project.subtotal,totalvat:r.project.vat*r.project.subtotal/100,grandTotal:r.project.subtotal+r.project.vat*r.project.subtotal/100}),v=Object(i.a)(g,2),y=v[0],w=v[1],P=l.a.useState(!1),k=Object(i.a)(P,2),F=(k[0],k[1]),X=l.a.useState({usd:r.project.dollarTransferRate,eur:r.project.euroTransferRate}),Z=Object(i.a)(X,2),Y=Z[0],$=Z[1],ee=Object(B.useForm)({mode:"all",resolver:Object(U.yupResolver)(Pe),defaultValues:{projectName:r.project.name||"",poqNumber:{id:r.project.poq.id,name:r.project.poq.Name}||null,customerName:{id:r.project.customer.id,name:"".concat(r.project.customer.firstName," ").concat(r.project.customer.lastName," ")}||null,status:{label:r.project.status,value:r.project.status}||"",scope:{id:r.project.project_scope.id,name:r.project.project_scope.scope}||"",startDate:r.project.startDate||new Date,endDate:r.project.endDate||new Date,shippingAddress:r.project.shippingAddress||"",shippingCost:r.project.shippingcost||0,otherCosts:r.project.othercost||0,totaldiscount:r.project.totalDiscount||0,vatpercentage:r.project.vat||0,productQty:1,productName:null,downPayment:r.project.downPayment||60,upponSupply:r.project.upponSupply||30,upponComission:r.project.upponComission||10,dollar:r.project.dollarTransferRate||1,euro:r.project.euroTransferRate||1,submitError:""}}),te=ee.handleSubmit,re=ee.errors,ne=ee.setError,ae=ee.setValue,ce=ee.getValues,oe=(ee.reset,ee.formState.isSubmitting);return l.a.useEffect((function(){}),[]),Object(o.jsx)(B.FormProvider,ve(ve({},ee),{},{children:Object(o.jsxs)("form",ve(ve({onSubmit:te((function(e){return se.apply(this,arguments)})),className:Object(W.a)(u.root,t)},s),{},{children:[Object(o.jsxs)(N.a,{container:!0,spacing:2,children:[Object(o.jsxs)(N.a,{item:!0,xs:12,lg:4,children:[Object(o.jsxs)(E.a,{children:[Object(o.jsx)(I.a,{title:"Basic"}),Object(o.jsx)(O.a,{}),Object(o.jsx)(D.a,{children:Object(o.jsxs)(N.a,{container:!0,spacing:3,children:[Object(o.jsx)(N.a,{item:!0,xs:12,md:12,children:Object(o.jsx)(K.a,{name:"projectName",label:"Project Name",variant:"outlined",errorObj:re})}),Object(o.jsx)(N.a,{item:!0,md:12,xs:12,children:Object(o.jsx)(J.a,{name:"customerName",label:"Customer",variant:"outlined",errorObj:re})}),Object(o.jsx)(N.a,{item:!0,md:12,xs:12,children:Object(o.jsx)(H.a,{name:"poqNumber",label:"B.O.Q #",variant:"outlined",disabled:!0,errorObj:re})}),Object(o.jsx)(N.a,{item:!0,md:12,xs:12,children:Object(o.jsx)(V.a,{name:"status",label:"Project Status",options:we,variant:"outlined",errorObj:re})}),Object(o.jsx)(N.a,{item:!0,md:12,xs:12,children:Object(o.jsx)(Q.a,{name:"scope",label:"Project Scope",variant:"outlined",errorObj:re})}),Object(o.jsx)(N.a,{item:!0,md:6,xs:12,children:Object(o.jsx)(_.a,{name:"startDate",label:"Start Date",variant:"outlined",errorObj:re})}),Object(o.jsx)(N.a,{item:!0,md:6,xs:12,children:Object(o.jsx)(_.a,{name:"endDate",label:"End Date",variant:"outlined",errorObj:re})}),Object(o.jsx)(N.a,{item:!0,md:12,xs:12,children:Object(o.jsx)(K.a,{name:"shippingAddress",label:"Shipping Address",variant:"outlined",multiline:!0,rows:2,errorObj:re})})]})})]}),Object(o.jsx)(d.a,{mt:3,children:Object(o.jsxs)(E.a,{children:[Object(o.jsx)(I.a,{title:"Others"}),Object(o.jsx)(O.a,{}),Object(o.jsx)(D.a,{children:Object(o.jsxs)(N.a,{container:!0,spacing:3,children:[Object(o.jsx)(N.a,{item:!0,xs:12,md:12,children:Object(o.jsx)(K.a,{name:"shippingCost",label:"Shipping Cost",type:"number",variant:"outlined",errorObj:re})}),Object(o.jsx)(N.a,{item:!0,xs:12,md:12,children:Object(o.jsx)(K.a,{name:"otherCosts",label:"Design - Installation - Documentation",type:"number",variant:"outlined",errorObj:re})}),Object(o.jsx)(N.a,{item:!0,xs:12,md:12,children:Object(o.jsx)(K.a,{name:"totaldiscount",label:"Total discount amount",type:"number",variant:"outlined",errorObj:re})}),Object(o.jsx)(N.a,{item:!0,xs:12,md:12}),Object(o.jsx)(N.a,{item:!0,xs:6,md:6,children:Object(o.jsx)(K.a,{name:"vatpercentage",label:"VAT %",type:"number",variant:"outlined",errorObj:re})})]})})]})}),Object(o.jsx)(d.a,{mt:3,children:Object(o.jsxs)(E.a,{children:[Object(o.jsx)(I.a,{title:"Total"}),Object(o.jsx)(O.a,{}),Object(o.jsx)(D.a,{children:Object(o.jsxs)(N.a,{container:!0,spacing:2,children:[Object(o.jsx)(N.a,{item:!0,xs:6,md:6,children:Object(o.jsx)(q.a,{children:"Net products cost : "})}),Object(o.jsx)(N.a,{item:!0,xs:6,md:6,children:Object(o.jsx)(q.a,{children:Math.round(100*(h+Number.EPSILON))/100})}),Object(o.jsx)(N.a,{item:!0,xs:6,md:6,children:Object(o.jsx)(q.a,{children:"Shipping and Installation : "})}),Object(o.jsx)(N.a,{item:!0,xs:6,md:6,children:Object(o.jsx)(q.a,{children:ce().otherCosts?Number(ce().otherCosts)+Number(ce().shippingCost):r.project.shippingcost+r.project.othercost})}),Object(o.jsx)(N.a,{item:!0,xs:6,md:6,children:Object(o.jsx)(q.a,{children:"Sub Total : "})}),Object(o.jsx)(N.a,{item:!0,xs:6,md:6,children:Object(o.jsx)(q.a,{children:Math.round(100*(y.subtotal+Number.EPSILON))/100})}),Object(o.jsx)(N.a,{item:!0,xs:6,md:6,children:Object(o.jsx)(q.a,{children:"Taxes : "})}),Object(o.jsx)(N.a,{item:!0,xs:6,md:6,children:Object(o.jsx)(q.a,{name:"vat",children:Math.round(100*(y.totalvat+Number.EPSILON))/100})}),Object(o.jsx)(N.a,{item:!0,xs:6,md:6,children:Object(o.jsx)(q.a,{children:"Grand total : "})}),Object(o.jsx)(N.a,{item:!0,xs:6,children:Object(o.jsx)(q.a,{name:"grandtotal",children:Math.round(100*(y.grandTotal+Number.EPSILON))/100})})]})})]})}),Object(o.jsx)(d.a,{mt:3,children:Object(o.jsxs)(E.a,{children:[Object(o.jsx)(I.a,{title:"Payment Terms"}),Object(o.jsx)(O.a,{}),Object(o.jsx)(D.a,{children:Object(o.jsxs)(N.a,{container:!0,spacing:3,children:[Object(o.jsx)(N.a,{item:!0,xs:4,children:Object(o.jsx)(K.a,{name:"downPayment",label:" Down payment %",type:"number",variant:"outlined",errorObj:re})}),Object(o.jsx)(N.a,{item:!0,xs:4,children:Object(o.jsx)(K.a,{name:"upponSupply",label:" Uppon Supply %",type:"number",variant:"outlined",errorObj:re})}),Object(o.jsx)(N.a,{item:!0,xs:4,children:Object(o.jsx)(K.a,{name:"upponComission",label:" Uppon Comission %",type:"number",variant:"outlined",errorObj:re})}),Object(o.jsx)(N.a,{item:!0,xs:6,md:6,children:Object(o.jsx)(q.a,{children:"Down Payment Amount : "})}),Object(o.jsx)(N.a,{item:!0,xs:6,md:6,children:Object(o.jsx)(q.a,{children:y.grandTotal&ce().upponSupply?Math.round(100*(y.grandTotal*ce().downPayment+Number.EPSILON))/100:"0"})}),Object(o.jsx)(N.a,{item:!0,xs:6,md:6,children:Object(o.jsx)(q.a,{children:"Uppon Supply amount : "})}),Object(o.jsx)(N.a,{item:!0,xs:6,md:6,children:Object(o.jsx)(q.a,{children:y.grandTotal&ce().upponSupply?Math.round(100*(y.grandTotal*ce().upponSupply+Number.EPSILON))/100:"0"})}),Object(o.jsx)(N.a,{item:!0,xs:6,md:6,children:Object(o.jsx)(q.a,{children:"Uppon comission"})}),Object(o.jsx)(N.a,{item:!0,xs:6,md:6,children:Object(o.jsx)(q.a,{children:y.grandTotal&ce().upponComission?Math.round(100*(y.grandTotal*ce().upponComission+Number.EPSILON))/100:"0"})}),Object(o.jsx)(N.a,{item:!0,xs:6,md:8,children:Object(o.jsx)(T.a,{variant:"contained",color:"secondary",type:"button",onClick:function(){F(!0),function(){var e=0;r.projectdetail.forEach((function(t){2==t.currency&&(e+=t.SalePrice*Y.usd*t.qnty),3==t.currency?e+=t.SalePrice*Y.eur*t.qnty:e+=t.SalePrice*t.qnty})),x(e);var t=e+Number(ce().otherCosts)+Number(ce().shippingCost)-Number(ce().totaldiscount),n=t*ce().vatpercentage/100;w({subtotal:t,totalvat:n,grandTotal:t+n})}()},className:u.calcButton,children:"Calculate"})})]})})]})})]}),Object(o.jsxs)(N.a,{item:!0,xs:12,lg:8,children:[Object(o.jsx)(N.a,{xs:12,children:Object(o.jsxs)(E.a,{children:[Object(o.jsx)(I.a,{title:"Transfer Rates"}),Object(o.jsx)(O.a,{}),Object(o.jsx)(D.a,{children:Object(o.jsxs)(N.a,{container:!0,spacing:2,children:[Object(o.jsx)(N.a,{item:!0,md:6,xs:6,children:Object(o.jsx)(K.a,{name:"dollar",label:"USD",type:"number",variant:"outlined",errorObj:re,onChange:function(e){$(ve(ve({},Y),{},{usd:Number(e.target.value)}))}})}),Object(o.jsx)(N.a,{item:!0,md:6,xs:6,children:Object(o.jsx)(K.a,{name:"euro",label:"EUR",type:"number",variant:"outlined",onChange:function(e){$(ve(ve({},Y),{},{eur:Number(e.target.value)}))},errorObj:re})})]})})]})}),Object(o.jsxs)(E.a,{children:[Object(o.jsx)(I.a,{title:"Products"}),Object(o.jsx)(O.a,{}),Object(o.jsxs)(D.a,{children:[Object(o.jsxs)(N.a,{container:!0,spacing:2,children:[Object(o.jsx)(N.a,{item:!0,md:9,xs:12,children:Object(o.jsx)(G.a,{name:"productName",label:"Product",variant:"outlined",errorObj:re})}),Object(o.jsx)(N.a,{item:!0,md:2,xs:12,children:Object(o.jsx)(K.a,{name:"productQty",label:"Quantity",type:"number",variant:"outlined",errorObj:re})}),Object(o.jsx)(N.a,{item:!0,md:1,xs:12,alignItems:"center",children:Object(o.jsx)(R.a,{color:"secondary",onClick:function(){F(!1),function(){ie.apply(this,arguments)}()},children:Object(o.jsx)(M.a,{fontSize:"large",children:Object(o.jsx)(z.a,{})})})})]}),Object(o.jsx)(d.a,{mt:2,children:Object(o.jsx)(xe,{query:r,setproject:n,transferRate:Y})})]})]})]})]}),re.submitError&&Object(o.jsx)(d.a,{mt:1,display:"flex",justifyContent:"center",children:Object(o.jsx)(A.a,{style:{fontSize:"24px"},error:!0,children:re.submitError.message})}),Object(o.jsx)(d.a,{mt:5,children:oe?Object(o.jsx)(L.a,{}):Object(o.jsx)(T.a,{variant:"contained",color:"secondary",type:"submit",disabled:oe,children:"Save"})})]}))}));function ie(){return(ie=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ce().productName){e.next=2;break}return e.abrupt("return");case 2:t={project:r.project.id,product:ce().productName.id,qnty:Number(ce().productQty),EndUserPrice:ce().productName.price,SalePrice:function(){switch(Number(ce().productName.currency.id)){case 1:return ce().productName.price;case 2:return ce().productName.price*Y.usd;case 3:return ce().productName.price*Y.eur}}()},f.a.get("".concat("http://localhost:1337","/project-details?_where[product]=").concat(t.product,"&[project]=").concat(t.project)).then(function(){var e=Object(c.a)(a.a.mark((function e(c){var o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==c.data.length){e.next=9;break}return e.next=3,f.a.post("".concat("http://localhost:1337","/project-details"),t);case 3:o=e.sent,n(ve(ve({},r),{},{projectdetail:[].concat(Object(S.a)(r.projectdetail),[o.data])})),ae("productName",{}),ae("productQty",0),e.next=10;break;case 9:j("Part already exsists",{variant:"error"});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(){return(se=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{console.log(t)}catch(r){console.log(r),j("Error edit Project",{variant:"error"}),ne("submitError",{type:"submit",message:"Error edit project"})}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},ke=r("7SZd"),Ce=r("wWq3"),Ne=r("YnhM"),Ee=r("17x9"),Ie=r.n(Ee);function De(){return(De=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function qe(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Te=Object(s.forwardRef)((function(e,t){var r=e.color,n=void 0===r?"currentColor":r,a=e.size,c=void 0===a?24:a,o=qe(e,["color","size"]);return l.a.createElement("svg",De({ref:t,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),l.a.createElement("polyline",{points:"3 6 5 6 21 6"}),l.a.createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),l.a.createElement("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),l.a.createElement("line",{x1:"14",y1:"11",x2:"14",y2:"17"}))}));Te.propTypes={color:Ie.a.string,size:Ie.a.oneOfType([Ie.a.string,Ie.a.number])},Te.displayName="Trash2";var Re=Te,Me=r("L3CC"),Ae=r("frks");function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){Object(k.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var We=Object(u.a)((function(){return{root:{}}})),ze=function(e){var t={out:{text:"OutCome",color:"error"},in:{text:"InCome",color:"success"}}[e],r=t.text,n=t.color;return Object(o.jsx)(Me.a,{color:n,children:r})};var Be=function(e){var t=e.className,r=e.query,n=e.setinvoices,a=Object(C.a)(e,["className","query","setinvoices"]),c=We(),s=Object(m.b)().enqueueSnackbar,u=l.a.useState(!1),j=Object(i.a)(u,2),b=j[0],p=(j[1],Object(ie.a)({query:r})),h=p.selectedItems,x=p.isAllItemsSelected,g=p.isSomeItemsSelected,v=p.page,y=p.limit,w=p.hasNext,P=p.hasPrev,k=p.isLoading,N=(p.setItems,p.setSelectedItems,p.enableBulkOperations),I=p.handleSelectAllItems,D=p.handleSelectOneItem,q=p.handlePageChange,T=p.handleLimitChange;return Object(o.jsxs)("div",Ue(Ue({className:Object(W.a)(c.root,t)},a),{},{children:[Object(o.jsxs)(E.a,{children:[Object(o.jsx)(d.a,{p:2,children:Object(o.jsx)(re.a,{InputProps:{startAdornment:Object(o.jsx)(ke.a,{position:"start",children:Object(o.jsx)(M.a,{fontSize:"small",color:"action",children:Object(o.jsx)(Ce.a,{})})})},style:{width:"25%"},onChange:function(){},placeholder:"Search Invocies",value:"",variant:"outlined"})}),Object(o.jsx)(O.a,{}),Object(o.jsx)(oe.a,{children:Object(o.jsx)(d.a,{minWidth:700,children:Object(o.jsxs)(X.a,{children:[Object(o.jsx)(Z.a,{children:Object(o.jsxs)(Y.a,{children:[Object(o.jsx)($.a,{padding:"checkbox",children:Object(o.jsx)(ee.a,{checked:x,indeterminate:g,onChange:I})}),Object(o.jsx)($.a,{children:"Number #"}),Object(o.jsx)($.a,{children:"Date"}),Object(o.jsx)($.a,{children:"Type"}),Object(o.jsx)($.a,{children:"Amount (EGP)"}),Object(o.jsx)($.a,{children:"Bank Transaction #"}),Object(o.jsx)($.a,{children:"Description"}),Object(o.jsx)($.a,{align:"right",children:"Actions"})]})}),k?Object(o.jsx)(d.a,{display:"flex",justifyContent:"center",mt:4,children:Object(o.jsx)(L.a,{})}):Object(o.jsx)(te.a,{children:r.map((function(e){var t=h.includes(e.id);return Object(o.jsxs)(Y.a,{hover:!0,selected:-1!==h.indexOf(e.id),children:[Object(o.jsx)($.a,{padding:"checkbox",children:Object(o.jsx)(ee.a,{checked:t,onChange:function(t){return D(t,e.id)},value:t})}),Object(o.jsx)($.a,{children:e.id}),Object(o.jsx)($.a,{children:e.date}),Object(o.jsx)($.a,{children:ze(e.type)}),Object(o.jsx)($.a,{children:e.amount}),Object(o.jsx)($.a,{children:e.bankTransaction}),Object(o.jsx)($.a,{children:e.description}),Object(o.jsxs)($.a,{align:"right",children:[Object(o.jsx)(R.a,{component:Ae.a,href:"/invoices/".concat(e.id),children:Object(o.jsx)(M.a,{fontSize:"small",children:Object(o.jsx)(Ne.a,{})})}),Object(o.jsx)(R.a,{onClick:function(){var t;t=e.id,f.a.delete("".concat("http://localhost:1337","/transactions/").concat(t)).then((function(){n(Object(S.a)(r.filter((function(e){return e.id!=t})))),s("Invoice has been deleted",{variant:"error"})})).catch((function(e){console.log(e)}))},children:Object(o.jsx)(M.a,{fontSize:"small",children:Object(o.jsx)(Re,{})})})]})]},e.id)}))})]})})}),Object(o.jsx)(ne.a,{component:"div",count:-1,onChangePage:q,onChangeRowsPerPage:T,page:v,rowsPerPage:y,rowsPerPageOptions:[5,10,25],nextIconButtonProps:{disabled:!w},backIconButtonProps:{disabled:!P},labelDisplayedRows:function(e){var t=e.from;return 0==r.length?"0-0":"".concat(t,"-").concat(t+r.length-1)}})]}),Object(o.jsx)(Oe,{open:N,selected:h,isLoading:b,onMarkActive:function(){},onMarkInactive:function(){},onDelete:function(){}})]}))},Fe=r("Txxr"),Ve=r("LvDl");function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){Object(k.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Je=F.c().shape({amount:F.b().required("required"),date:F.a().nullable().typeError("Invalid date.").required("Required."),type:F.c().nullable().required("Required."),description:F.e(255),banktransaction:F.b().nullable()}),He=Object(u.a)((function(e){return{root:{},fontWeightMedium:{fontWeight:e.typography.fontWeightMedium},inputForm:{margin:"auto"},submitbutton:{width:"90%"},datepicker:{width:"100%"},result:{fontWeightMedium:{fontWeight:e.typography.fontWeightMedium},marginTop:15}}})),Ge=[{label:"Income",value:"in"},{label:"OutCome",value:"out"}];var Qe=function(e){var t=e.className,r=Object(C.a)(e,["className"]),n=He(),s=Object(m.b)().enqueueSnackbar,u=Object(g.useRouter)(),j=Object(Fe.a)(),d=l.a.useState([]),b=Object(i.a)(d,2),p=b[0],h=b[1],x=Object(B.useForm)({mode:"all",resolver:Object(U.yupResolver)(Je),defaultValues:{}}),v=x.handleSubmit,y=x.errors,w=x.setError,P=x.setValue,k=x.reset,D=x.formState.isSubmitting,q=l.a.useCallback(Object(c.a)(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=u.query.projectId,e.next=4,f.a.get("".concat("http://localhost:1337","/transactions?_where[project]=").concat(t));case 4:r=e.sent,n=r.data,j.current&&h(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[j]);return l.a.useEffect((function(){q()}),[]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(B.FormProvider,Ke(Ke({},x),{},{children:Object(o.jsx)("form",Ke(Ke({onSubmit:v((function(e){return R.apply(this,arguments)})),className:Object(W.a)(n.root,t)},r),{},{children:Object(o.jsxs)(E.a,Ke(Ke({className:Object(W.a)(n.root,t)},r),{},{children:[Object(o.jsx)(I.a,{title:"New Invoice"}),Object(o.jsx)(O.a,{}),Object(o.jsxs)(N.a,{container:!0,spacing:2,className:n.inputForm,alignItems:"center",children:[Object(o.jsx)(N.a,{item:!0,md:4,xs:12,children:Object(o.jsx)(K.a,{name:"amount",label:"Amount (EGP)",variant:"outlined",type:"number",errorObj:y})}),Object(o.jsx)(N.a,{item:!0,md:4,xs:12,children:Object(o.jsx)(V.a,{name:"type",label:"Transaction type",variant:"outlined",options:Ge,errorObj:y})}),Object(o.jsx)(N.a,{item:!0,md:4,xs:12,children:Object(o.jsx)(_.a,{name:"date",label:"Transaction Date",variant:"outlined",className:n.datepicker,errorObj:y})}),Object(o.jsx)(N.a,{item:!0,md:4,xs:12,children:Object(o.jsx)(K.a,{name:"banktransaction",label:"Bank Transaction Number",variant:"outlined",margin:"auto",errorObj:y})}),Object(o.jsx)(N.a,{item:!0,md:4,xs:12,children:Object(o.jsx)(K.a,{name:"description",label:"Description",variant:"outlined",margin:"auto",errorObj:y})}),Object(o.jsx)(N.a,{item:!0,md:4,xs:12,children:Object(o.jsx)(T.a,{variant:"contained",color:"secondary",type:"submit",className:n.submitbutton,disabled:D,children:"Submit"})})]})]}))}))})),Object(o.jsxs)(E.a,Ke(Ke({className:Object(W.a)(n.result,t)},r),{},{children:[Object(o.jsx)(I.a,{title:"Invoces/Billings"}),Object(o.jsx)(O.a,{}),Object(o.jsx)(Be,{query:p,setinvoices:h})]}))]});function R(){return(R=Object(c.a)(a.a.mark((function e(t){var r,n,c,o,i,l,j,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.amount,n=t.date,c=t.description,o=t.type,i=t.banktransaction,e.prev=1,P("submitError",""),l=u.query.projectId,j={amount:r,date:n,bankTransaction:i,description:c,type:o.value,project:l},d=f.a.post("".concat("http://localhost:1337","/transactions"),j),e.t0=h,e.t1=[],e.t2=Object(S.a)(p),e.next=11,d;case 11:e.t3=e.sent.data,e.t4=[e.t3],e.t5=e.t1.concat.call(e.t1,e.t2,e.t4),(0,e.t0)(e.t5),k({amount:"",date:"",description:"",type:"",banktransaction:""}),k(Ve.values),s("Transaction Saved",{variant:"success"}),e.next=24;break;case 20:e.prev=20,e.t6=e.catch(1),s("Error in transaction.",{variant:"error"}),w("submitError",{type:"submit",message:"Error in transaction"});case 24:case"end":return e.stop()}}),e,null,[[1,20]])})))).apply(this,arguments)}},Xe=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)}}})),Ze=[{title:"Management",href:"#"},{title:"Proojects",href:"/projects"},{title:"Edit"}];function Ye(){var e=Xe(),t=Object(g.useRouter)(),r=l.a.useState({}),n=Object(i.a)(r,2),s=n[0],u=n[1],h=l.a.useState(!0),w=Object(i.a)(h,2),P=w[0],S=w[1],k=l.a.useState("details"),C=Object(i.a)(k,2),N=C[0],E=C[1],I=Object(m.b)().enqueueSnackbar,D=t.query.projectId;l.a.useEffect((function(){D&&function(){q.apply(this,arguments)}()}),[D]);return Object(o.jsx)(o.Fragment,{children:P?Object(o.jsx)(x.a,{}):Object(o.jsx)(y.a,{className:e.root,title:"Projects - Edit",children:Object(o.jsxs)(j.a,{maxWidth:!1,children:[Object(o.jsx)(v.a,{links:Ze,mainText:"Edit Project"}),Object(o.jsx)(d.a,{mt:3,children:Object(o.jsx)(b.a,{onChange:function(e,t){E(t)},scrollButtons:"auto",value:N,variant:"scrollable",textColor:"secondary",children:[{value:"details",label:"Details"},{value:"invoices",label:"Invoices"}].map((function(e){return Object(o.jsx)(p.a,{label:e.label,value:e.value},e.value)}))})}),Object(o.jsx)(O.a,{}),Object(o.jsxs)(d.a,{mt:3,children:["details"===N&&Object(o.jsx)(Se,{project:s,setproject:u}),"invoices"===N&&Object(o.jsx)(Qe,{})]})]})})});function q(){return(q=Object(c.a)(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,D){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,f.a.get("".concat("http://localhost:1337","/projects/").concat(D));case 5:if(200!==(t=e.sent).status){e.next=12;break}return e.next=9,f.a.get("".concat("http://localhost:1337","/project-details?_where[project]=").concat(t.data.id));case 9:r=e.sent,n=r.data,u({project:t.data,projectdetail:n});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),I("error ".concat(e.t0),{variant:"error"});case 17:return e.prev=17,S(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,14,17,20]])})))).apply(this,arguments)}}Ye.Guard=w.a,Ye.Layout=P.a;t.default=Ye},wWq3:function(e,t,r){"use strict";var n=r("q1tI"),a=r.n(n),c=r("17x9"),o=r.n(c);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=Object(n.forwardRef)((function(e,t){var r=e.color,n=void 0===r?"currentColor":r,c=e.size,o=void 0===c?24:c,l=s(e,["color","size"]);return a.a.createElement("svg",i({ref:t,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),a.a.createElement("circle",{cx:"11",cy:"11",r:"8"}),a.a.createElement("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}))}));l.propTypes={color:o.a.string,size:o.a.oneOfType([o.a.string,o.a.number])},l.displayName="Search",t.a=l},wvod:function(e,t,r){"use strict";var n=r("vJKn"),a=r.n(n),c=r("nKUr"),o=r("cpVT"),i=r("rg98"),s=r("xvhg"),l=r("dhJC"),u=r("q1tI"),j=r.n(u),d=r("vDqi"),b=r.n(d),p=r("ADg1"),O=r("r9w1"),m=r("iae6"),h=r("Spdj"),f=r("+bXu"),x=r("NKCw"),g=r("eRyV");function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.a=function(e){var t=e.name,r=e.label,n=void 0===r?"":r,o=e.errorObj,u=void 0===o?{}:o,d=Object(l.a)(e,["name","label","errorObj"]),v=Object(x.useFormContext)().control,w=Object(x.useController)({name:t,control:v}).field,P=w.ref,S=w.onChange,k=Object(l.a)(w,["ref","onChange"]),C=j.a.useState(!1),N=Object(s.a)(C,2),E=N[0],I=N[1],D=j.a.useState([]),q=Object(s.a)(D,2),T=q[0],R=q[1],M=j.a.useState(!1),A=Object(s.a)(M,2),L=A[0],U=A[1],W=Object(g.a)(t,u),z=W.isError,B=W.errorMessage;function F(){return(F=Object(i.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(!0),e.next=3,b.a.get("".concat("http://localhost:1337","/project-scopes"));case 3:r=e.sent,R(r.data.map((function(e){return{id:e.id,name:e.scope}}))),U(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return j.a.useEffect((function(){E||R([])}),[E]),Object(c.jsxs)(p.a,{fullWidth:!0,error:z,children:[Object(c.jsx)(f.a,y(y({},k),{},{ref:P,open:E,options:T,loading:L,onOpen:function(){return I(!0)},onClose:function(){return I(!1)},onChange:function(e,t){S(t)},getOptionLabel:function(e){return e.name},getOptionSelected:function(e,t){return e.name==t.name},renderOption:function(e){return Object(c.jsx)("span",{children:e.name})},renderInput:function(e){return Object(c.jsx)(O.a,y(y({},e),{},{label:n,variant:"outlined",error:z,onChange:function(e){return function(e){return F.apply(this,arguments)}(e.target.value)},InputProps:y(y({},e.InputProps),{},{endAdornment:Object(c.jsxs)(c.Fragment,{children:[L?Object(c.jsx)(m.a,{size:25}):null,e.InputProps.endAdornment]})})}))}},d)),z&&Object(c.jsx)(h.a,{error:!0,children:B})]})}}},[["sU1k",1,0,4,2,3,5,6,7,8,9,10,11,12,13,14,15,16,19,25,31]]]);