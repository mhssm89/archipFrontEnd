_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[61],{my7y:function(e,t,r){"use strict";r.r(t);var n=r("nKUr"),c=r("vJKn"),a=r.n(c),i=r("rg98"),s=r("xvhg"),o=r("q1tI"),l=r.n(o),j=r("20a2"),d=r("R/WZ"),b=r("Ji2X"),u=r("Z3vd"),h=r("HR5l"),O=r("hlFM"),p=r("EBQD"),x=r("sxe4"),f=r("79WI"),m=r("Mya6"),g=r("cpVT"),v=r("dhJC"),y=r("30+C"),P=r("tRbT"),w=r("wb2y"),k=r("/EAt"),N=r("Imu7"),S=r("sRsu"),D=r("3PeG"),I=r("VmPI"),C=r("iae6"),E=r("Uf6+"),_=r("PsDL"),q=r("ELmG"),M=r("kfFl"),A=r("iuhU"),L=r("NKQG"),F=r("KcsI"),B=r("Fn3X"),R=r("cuOD"),T=r.n(R),z=r("bgvd"),J=r("UGp+"),V=r("NKCw"),W=r("YpyM"),G=r("sn/O"),H=r("frks"),K=r("2Wm+"),U=r("vDqi"),X=r.n(U),Q=r("IIOH"),Z=r("1NhI"),Y=r("ofer"),$=r("JoNN"),ee=r("wHH0");function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){Object(g.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ne=Object(d.a)((function(e){return{root:{padding:e.spacing(2)},actions:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > * + *":{marginLeft:e.spacing(2)}}}}));var ce=function(e){var t=e.className,r=e.onDelete,c=void 0===r?function(){}:r,a=e.onMarkActive,i=void 0===a?function(){}:a,s=e.onMarkInactive,o=void 0===s?function(){}:s,l=e.open,j=void 0!==l&&l,d=e.selected,b=e.isLoading,O=void 0!==b&&b,p=Object(v.a)(e,["className","onDelete","onMarkActive","onMarkInactive","open","selected","isLoading"]),x=ne();return Object(n.jsx)(Q.a,{anchor:"bottom",open:j,PaperProps:{elevation:1},variant:"persistent",children:Object(n.jsx)("div",re(re({className:Object(A.a)(x.root,t)},p),{},{children:Object(n.jsxs)(P.a,{alignItems:"center",container:!0,spacing:2,children:[Object(n.jsx)(Z.a,{smDown:!0,children:Object(n.jsx)(P.a,{item:!0,md:3,children:Object(n.jsxs)(Y.a,{color:"textSecondary",variant:"subtitle1",children:[d.length," selected"]})})}),Object(n.jsx)(P.a,{item:!0,md:6,xs:12,children:Object(n.jsx)("div",{className:x.actions,children:O?Object(n.jsx)(C.a,{}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(u.a,{onClick:i,startIcon:Object(n.jsx)(h.a,{fontSize:"small",children:Object(n.jsx)($.a,{})}),children:"Mark Active"}),Object(n.jsx)(u.a,{onClick:o,startIcon:Object(n.jsx)(h.a,{fontSize:"small",children:Object(n.jsx)(ee.a,{})}),children:"Mark Inactive"}),Object(n.jsx)(u.a,{onClick:c,startIcon:Object(n.jsx)(h.a,{fontSize:"small",children:Object(n.jsx)(F.a,{})}),children:"Delete"})]})})})]})}))})},ae=r("e5va");function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){Object(g.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var oe=Object(d.a)((function(){return{root:{}}})),le=J.c().shape({filter:J.c().shape({label:J.e(),id:J.e()}).nullable(),search:J.e()}),je=[{label:"Part Name",id:"partName"},{label:"Part Number",id:"partNumber"},{label:"Brand",id:"brand"},{label:"Status",id:"partStatus"},{label:"Price",id:"price"},{label:"Supplier Name",id:"supplier.supplierName"}];var de=function(e){var t=e.className,r=e.query,c=e.setquery,o=Object(v.a)(e,["className","query","setquery"]),j=oe(),d=Object(L.b)().enqueueSnackbar,b=l.a.useState(!1),p=Object(s.a)(b,2),x=p[0],f=(p[1],l.a.useState(!1)),m=Object(s.a)(f,2),g=m[0],R=m[1],J=l.a.useState({}),U=Object(s.a)(J,2),Q=U[0],Z=U[1],Y=Object(K.a)({query:r}),$=Y.selectedItems,ee=Y.isAllItemsSelected,te=Y.isSomeItemsSelected,re=Y.page,ne=Y.limit,ie=Y.hasNext,de=Y.hasPrev,be=Y.isLoading,ue=(Y.setItems,Y.setSelectedItems,Y.enableBulkOperations),he=Y.handleSelectAllItems,Oe=Y.handleSelectOneItem,pe=Y.handlePageChange,xe=Y.handleLimitChange,fe=Object(V.useForm)({mode:"all",resolver:Object(z.yupResolver)(le),defaultValues:{filter:je[0],search:""}}),me=fe.handleSubmit,ge=fe.errors,ve=fe.setError,ye=fe.setValue,Pe=(fe.reset,fe.watch,fe.formState.isSubmitting);return Object(n.jsxs)("div",se(se({className:Object(A.a)(j.root,t)},o),{},{children:[Object(n.jsxs)(y.a,{children:[Object(n.jsx)(V.FormProvider,se(se({},fe),{},{children:Object(n.jsx)("form",se(se({onSubmit:me(ke),className:Object(A.a)(j.root,t)},o),{},{children:Object(n.jsxs)(P.a,{container:!0,spacing:3,alignItems:"center",style:{paddingTop:"1rem",margin:"auto"},children:[Object(n.jsx)(P.a,{item:!0,xs:4,children:Object(n.jsx)(W.a,{options:je,name:"filter",label:"Filter",variant:"outlined",setValue:ye,errorObj:ge})}),Object(n.jsx)(P.a,{item:!0,md:4,xs:6,children:Object(n.jsx)(G.a,{name:"search",label:"Search",variant:"outlined",errorObj:ge})}),Object(n.jsxs)(P.a,{item:!0,xs:4,children:[Object(n.jsx)(u.a,{variant:"contained",color:"secondary",type:"button",disabled:Pe,onClick:me(ke),children:"Search"}),Object(n.jsx)(u.a,{variant:"outlined",type:"button",color:"secondary",style:{marginLeft:"1rem"},disabled:Pe,onClick:function(){!function(){we.apply(this,arguments)}()},children:"reset"})]})]})}))})),Object(n.jsx)(w.a,{}),Object(n.jsx)(T.a,{children:Object(n.jsx)(O.a,{minWidth:700,children:Object(n.jsxs)(k.a,{children:[Object(n.jsx)(N.a,{children:Object(n.jsxs)(S.a,{children:[Object(n.jsx)(D.a,{padding:"checkbox",children:Object(n.jsx)(I.a,{checked:ee,indeterminate:te,onChange:he})}),Object(n.jsx)(D.a,{children:"Part #"}),Object(n.jsx)(D.a,{children:"Part Name"}),Object(n.jsx)(D.a,{children:"Brand"}),Object(n.jsx)(D.a,{children:"Price"}),Object(n.jsx)(D.a,{children:"currency"}),Object(n.jsx)(D.a,{children:"Discount (%)"}),Object(n.jsx)(D.a,{children:"Part desc."}),Object(n.jsx)(D.a,{children:"Part Data sheet"}),Object(n.jsx)(D.a,{children:"supplier"}),Object(n.jsx)(D.a,{align:"right",children:"Actions"})]})}),be?Object(n.jsx)(O.a,{display:"flex",justifyContent:"center",mt:4,children:Object(n.jsx)(C.a,{})}):Object(n.jsx)(E.a,{children:r.map((function(e){var t=$.includes(e.id);return Object(n.jsxs)(S.a,{hover:!0,selected:-1!==$.indexOf(e.id),children:[Object(n.jsx)(D.a,{padding:"checkbox",children:Object(n.jsx)(I.a,{checked:t,onChange:function(t){return Oe(t,e.id)},value:t})}),Object(n.jsx)(D.a,{children:e.partNumber}),Object(n.jsx)(D.a,{children:e.partName}),Object(n.jsx)(D.a,{children:e.brand}),Object(n.jsx)(D.a,{children:e.price}),Object(n.jsx)(D.a,{children:e.currency.name}),Object(n.jsx)(D.a,{children:e.discount}),Object(n.jsx)(D.a,{children:e.desc}),Object(n.jsx)(D.a,{children:e.partdatasheet}),Object(n.jsx)(D.a,{children:e.supplier.supplierName}),Object(n.jsxs)(D.a,{align:"right",children:[Object(n.jsx)(_.a,{onClick:function(){return t={id:e.id,name:e.partNumber},R(!0),void Z(t);var t},children:Object(n.jsx)(h.a,{fontSize:"small",children:Object(n.jsx)(F.a,{})})}),Object(n.jsx)(_.a,{component:H.a,href:"/products/".concat(e.id,"/edit"),children:Object(n.jsx)(h.a,{fontSize:"small",children:Object(n.jsx)(B.a,{})})})]})]},e.id)}))})]})})}),Object(n.jsx)(q.a,{component:"div",count:-1,onChangePage:pe,onChangeRowsPerPage:xe,page:re,rowsPerPage:ne,rowsPerPageOptions:[5,10,25],nextIconButtonProps:{disabled:!ie},backIconButtonProps:{disabled:!de},labelDisplayedRows:function(e){var t=e.from;return 0==r.length?"0-0":"".concat(t,"-").concat(t+r.length-1)}})]}),Object(n.jsx)(ce,{open:ue,selected:$,isLoading:x,onMarkActive:function(){},onMarkInactive:function(){},onDelete:function(){}}),Object(n.jsx)(M.a,{open:g,children:Object(n.jsx)(ae.a,{setOpenDialoge:R,deletedValue:Q.name,runFunction:function(){return Se.apply(this,arguments)}})})]}));function we(){return(we=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{X.a.get("".concat("http://localhost:1337","/products?_where[isDeleted]=0")).then((function(e){c(e.data)}))}catch(t){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(i.a)(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.filter,n=t.search;try{ye("submitError",""),X.a.get("".concat("http://localhost:1337","/products?_where[").concat(r.id,"_contains]=").concat(n,"&[isDeleted]=0")).then((function(e){console.log(e.data),c(e.data),d("Filter applied",{variant:"success"})})).catch((function(e){d("Error in filtering",{variant:"error"}),console.log(e)}))}catch(a){d("Error in filtering",{variant:"error"}),console.log(a),ve("submitError",{type:"submit",message:"Error creating new product."})}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(){return(Se=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:X.a.put("".concat("http://localhost:1337","/products/").concat(Q.id),{isDeleted:1}).then((function(e){c(r.filter((function(e){return e.id!=Q.id})))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},be=r("Txxr"),ue=r("1DBx"),he=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)}}})),Oe=[{title:"Dashboard",href:"/dashboard"},{title:"Management",href:"#"},{title:"Products"}];function pe(){var e=he(),t=Object(j.useRouter)(),r=Object(be.a)(),c=l.a.useState([]),o=Object(s.a)(c,2),d=o[0],m=o[1],g=l.a.useCallback(Object(i.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X.a.get("".concat("http://localhost:1337","/products/?_where[isDeleted]=0"));case 3:t=e.sent,n=t.data,r.current&&m(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[r]);return l.a.useEffect((function(){g()}),[g]),Object(n.jsx)(f.a,{className:e.root,title:"Products - All",children:Object(n.jsxs)(b.a,{maxWidth:!1,children:[Object(n.jsx)(x.a,{links:Oe,mainText:"All Products",rightComponent:Object(n.jsx)(u.a,{color:"secondary",variant:"contained",onClick:function(){return t.push("/products/create")},className:e.action,startIcon:Object(n.jsx)(h.a,{fontSize:"small",children:Object(n.jsx)(p.a,{})}),children:"New Product"})}),Object(n.jsx)(O.a,{mt:3,children:Object(n.jsx)(de,{query:d,setquery:m})})]})})}pe.Guard=m.a,pe.Layout=ue.a;t.default=pe},pqrm:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products",function(){return r("my7y")}])}},[["pqrm",1,0,4,2,3,5,6,7,8,9,10,11,12,13,14,16,18]]]);