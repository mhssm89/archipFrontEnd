_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[59],{Gw4x:function(e,t,n){"use strict";var r=n("nKUr"),a=n("q1tI"),c=n("R/WZ"),s=n("hlFM"),i=n("de8u"),o=n("Mj6V"),l=n.n(o),u=Object(c.a)((function(e){return{root:{alignItems:"center",backgroundColor:e.palette.background.default,display:"flex",flexDirection:"column",height:"100%",justifyContent:"center",minHeight:"100%",padding:e.spacing(3)}}}));t.a=function(){var e=u();return Object(a.useEffect)((function(){return l.a.start(),function(){l.a.done()}}),[]),Object(r.jsx)("div",{className:e.root,children:Object(r.jsx)(s.a,{width:400,children:Object(r.jsx)(i.a,{})})})}},Mj6V:function(e,t,n){var r,a;void 0===(a="function"===typeof(r=function(){var e={version:"0.2.0"},t=e.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function n(e,t,n){return e<t?t:e>n?n:e}function r(e){return 100*(-1+e)}function a(e,n,a){var c;return(c="translate3d"===t.positionUsing?{transform:"translate3d("+r(e)+"%,0,0)"}:"translate"===t.positionUsing?{transform:"translate("+r(e)+"%,0)"}:{"margin-left":r(e)+"%"}).transition="all "+n+"ms "+a,c}e.configure=function(e){var n,r;for(n in e)void 0!==(r=e[n])&&e.hasOwnProperty(n)&&(t[n]=r);return this},e.status=null,e.set=function(r){var i=e.isStarted();r=n(r,t.minimum,1),e.status=1===r?null:r;var o=e.render(!i),l=o.querySelector(t.barSelector),u=t.speed,d=t.easing;return o.offsetWidth,c((function(n){""===t.positionUsing&&(t.positionUsing=e.getPositioningCSS()),s(l,a(r,u,d)),1===r?(s(o,{transition:"none",opacity:1}),o.offsetWidth,setTimeout((function(){s(o,{transition:"all "+u+"ms linear",opacity:0}),setTimeout((function(){e.remove(),n()}),u)}),u)):setTimeout(n,u)})),this},e.isStarted=function(){return"number"===typeof e.status},e.start=function(){e.status||e.set(0);var n=function(){setTimeout((function(){e.status&&(e.trickle(),n())}),t.trickleSpeed)};return t.trickle&&n(),this},e.done=function(t){return t||e.status?e.inc(.3+.5*Math.random()).set(1):this},e.inc=function(t){var r=e.status;return r?("number"!==typeof t&&(t=(1-r)*n(Math.random()*r,.1,.95)),r=n(r+t,0,.994),e.set(r)):e.start()},e.trickle=function(){return e.inc(Math.random()*t.trickleRate)},function(){var t=0,n=0;e.promise=function(r){return r&&"resolved"!==r.state()?(0===n&&e.start(),t++,n++,r.always((function(){0===--n?(t=0,e.done()):e.set((t-n)/t)})),this):this}}(),e.render=function(n){if(e.isRendered())return document.getElementById("nprogress");o(document.documentElement,"nprogress-busy");var a=document.createElement("div");a.id="nprogress",a.innerHTML=t.template;var c,i=a.querySelector(t.barSelector),l=n?"-100":r(e.status||0),u=document.querySelector(t.parent);return s(i,{transition:"all 0 linear",transform:"translate3d("+l+"%,0,0)"}),t.showSpinner||(c=a.querySelector(t.spinnerSelector))&&d(c),u!=document.body&&o(u,"nprogress-custom-parent"),u.appendChild(a),a},e.remove=function(){l(document.documentElement,"nprogress-busy"),l(document.querySelector(t.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&d(e)},e.isRendered=function(){return!!document.getElementById("nprogress")},e.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var c=function(){var e=[];function t(){var n=e.shift();n&&n(t)}return function(n){e.push(n),1==e.length&&t()}}(),s=function(){var e=["Webkit","O","Moz","ms"],t={};function n(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(e,t){return t.toUpperCase()}))}function r(t){var n=document.body.style;if(t in n)return t;for(var r,a=e.length,c=t.charAt(0).toUpperCase()+t.slice(1);a--;)if((r=e[a]+c)in n)return r;return t}function a(e){return e=n(e),t[e]||(t[e]=r(e))}function c(e,t,n){t=a(t),e.style[t]=n}return function(e,t){var n,r,a=arguments;if(2==a.length)for(n in t)void 0!==(r=t[n])&&t.hasOwnProperty(n)&&c(e,n,r);else c(e,a[1],a[2])}}();function i(e,t){return("string"==typeof e?e:u(e)).indexOf(" "+t+" ")>=0}function o(e,t){var n=u(e),r=n+t;i(n,t)||(e.className=r.substring(1))}function l(e,t){var n,r=u(e);i(e,t)&&(n=r.replace(" "+t+" "," "),e.className=n.substring(1,n.length-1))}function u(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function d(e){e&&e.parentNode&&e.parentNode.removeChild(e)}return e})?r.call(t,n,t,e):r)||(e.exports=a)},Txxr:function(e,t,n){"use strict";var r=n("q1tI");t.a=function(){var e=Object(r.useRef)(!0);return Object(r.useEffect)((function(){return function(){e.current=!1}}),[]),e}},WJNg:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/poqs/[poqId]/edit",function(){return n("o3sL")}])},o3sL:function(e,t,n){"use strict";n.r(t);var r=n("vJKn"),a=n.n(r),c=n("rg98"),s=n("nKUr"),i=n("xvhg"),o=n("q1tI"),l=n.n(o),u=n("20a2"),d=n("R/WZ"),j=n("Ji2X"),p=n("hlFM"),b=n("NKQG"),m=n("sxe4"),O=n("Gw4x"),h=n("79WI"),x=n("Mya6"),f=n("z7pX"),g=n("cpVT"),y=n("dhJC"),v=n("tRbT"),q=n("30+C"),w=n("50B7"),S=n("wb2y"),P=n("oa/T"),N=n("ofer"),k=n("Z3vd"),C=n("PsDL"),D=n("HR5l"),E=n("Spdj"),I=n("iae6"),T=n("bgvd"),R=n("iuhU"),M=n("Rzx/"),Q=n("NKCw"),L=n("UGp+"),U=n("k80k"),A=n("XNQK"),W=n("MMHs"),_=n("sn/O"),z=n("vDqi"),B=n.n(z),G=n("/EAt"),H=n("Imu7"),J=n("sRsu"),V=n("3PeG"),K=n("VmPI"),F=n("Uf6+"),X=n("r9w1"),Z=n("ELmG"),Y=n("KcsI"),$=n("cuOD"),ee=n.n($),te=n("2Wm+"),ne=n("IIOH"),re=n("1NhI"),ae=n("JoNN"),ce=n("wHH0");function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe=Object(d.a)((function(e){return{root:{padding:e.spacing(2)},actions:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > * + *":{marginLeft:e.spacing(2)}}}}));var le=function(e){var t=e.className,n=e.onDelete,r=void 0===n?function(){}:n,a=e.onMarkActive,c=void 0===a?function(){}:a,i=e.onMarkInactive,o=void 0===i?function(){}:i,l=e.open,u=void 0!==l&&l,d=e.selected,j=e.isLoading,p=void 0!==j&&j,b=Object(y.a)(e,["className","onDelete","onMarkActive","onMarkInactive","open","selected","isLoading"]),m=oe();return Object(s.jsx)(ne.a,{anchor:"bottom",open:u,PaperProps:{elevation:1},variant:"persistent",children:Object(s.jsx)("div",ie(ie({className:Object(R.a)(m.root,t)},b),{},{children:Object(s.jsxs)(v.a,{alignItems:"center",container:!0,spacing:2,children:[Object(s.jsx)(re.a,{smDown:!0,children:Object(s.jsx)(v.a,{item:!0,md:3,children:Object(s.jsxs)(N.a,{color:"textSecondary",variant:"subtitle1",children:[d.length," selected"]})})}),Object(s.jsx)(v.a,{item:!0,md:6,xs:12,children:Object(s.jsx)("div",{className:m.actions,children:p?Object(s.jsx)(I.a,{}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(k.a,{onClick:c,startIcon:Object(s.jsx)(D.a,{fontSize:"small",children:Object(s.jsx)(ae.a,{})}),children:"Mark Active"}),Object(s.jsx)(k.a,{onClick:o,startIcon:Object(s.jsx)(D.a,{fontSize:"small",children:Object(s.jsx)(ce.a,{})}),children:"Mark Inactive"}),Object(s.jsx)(k.a,{onClick:r,startIcon:Object(s.jsx)(D.a,{fontSize:"small",children:Object(s.jsx)(Y.a,{})}),children:"Delete"})]})})})]})}))})};function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je=Object(d.a)((function(){return{root:{}}}));var pe=function(e){var t=e.className,n=e.query,r=e.setPOQ,a=e.transferRate,c=Object(y.a)(e,["className","query","setPOQ","transferRate"]),o=je(),u=Object(b.b)().enqueueSnackbar,d=l.a.useState(!1),j=Object(i.a)(d,2),m=j[0],O=(j[1],Object(te.a)({query:n})),h=O.selectedItems,x=O.isAllItemsSelected,f=O.isSomeItemsSelected,g=O.page,v=O.limit,w=O.hasNext,S=O.hasPrev,P=O.isLoading,N=(O.setItems,O.setSelectedItems,O.enableBulkOperations),k=O.handleSelectAllItems,E=O.handleSelectOneItem,T=O.handlePageChange,M=O.handleLimitChange;return Object(s.jsxs)("div",de(de({className:Object(R.a)(o.root,t)},c),{},{children:[Object(s.jsxs)(q.a,{children:[Object(s.jsx)(ee.a,{children:Object(s.jsx)(p.a,{minWidth:700,children:Object(s.jsxs)(G.a,{children:[Object(s.jsx)(H.a,{children:Object(s.jsxs)(J.a,{children:[Object(s.jsx)(V.a,{padding:"checkbox",children:Object(s.jsx)(K.a,{checked:x,indeterminate:f,onChange:k})}),Object(s.jsx)(V.a,{children:"Part #"}),Object(s.jsx)(V.a,{children:"Quantity"}),Object(s.jsx)(V.a,{children:"Price "}),Object(s.jsx)(V.a,{children:"Currency"}),Object(s.jsx)(V.a,{children:"Discount (%)"}),Object(s.jsx)(V.a,{children:"Sale Percentage (%)"}),Object(s.jsx)(V.a,{children:"Sale price "}),Object(s.jsx)(V.a,{align:"right",children:"Actions"})]})}),P?Object(s.jsx)(p.a,{display:"flex",justifyContent:"center",mt:4,children:Object(s.jsx)(I.a,{})}):Object(s.jsx)(F.a,{children:n.poqDetail.map((function(e){var t=h.includes(e.id);return Object(s.jsxs)(J.a,{hover:!0,selected:-1!==h.indexOf(e.id),children:[Object(s.jsx)(V.a,{padding:"checkbox",children:Object(s.jsx)(K.a,{checked:t,onChange:function(t){return E(t,e.id)},value:t})}),Object(s.jsx)(V.a,{children:e.product.partNumber}),Object(s.jsx)(V.a,{style:{width:"10%"},children:Object(s.jsx)(X.a,{type:"number",name:"qnty".concat(e.id),variant:"outlined",value:e.qnty,onChange:function(t){e.qnty=Number(t.target.value),r(de({},n))}})}),Object(s.jsx)(V.a,{children:e.enduserprice}),Object(s.jsx)(V.a,{children:function(){switch(e.product.currency){case 1:return"EGP";case 2:return"USD";case 3:return"EUR"}}()}),Object(s.jsx)(V.a,{children:e.product.discount}),Object(s.jsx)(V.a,{style:{width:"20%"},children:Object(s.jsx)(X.a,{type:"number",name:"salepercent".concat(e.id),variant:"outlined",value:e.salepercentage,style:{width:"60%"},onChange:function(t){e.saleprice=e.enduserprice*Number(t.target.value)/100+e.enduserprice,e.salepercentage=Number(t.target.value),r(de({},n))}})}),Object(s.jsx)(V.a,{children:2==e.product.currency?e.enduserprice*a.usd*e.qnty:3==e.product.currency?e.enduserprice*a.eur*e.qnty:void 0}),Object(s.jsx)(V.a,{align:"right",children:Object(s.jsx)(C.a,{onClick:function(){return t=e.id,void B.a.delete("h".concat("https://dry-journey-56904.herokuapp.com","/poqdetails/").concat(t)).then((function(){r(de(de({},n),{},{poqDetail:n.poqDetail.filter((function(e){return e.id!=t}))})),u("deleted",{variant:"error"})}));var t},children:Object(s.jsx)(D.a,{fontSize:"small",children:Object(s.jsx)(Y.a,{})})})})]},e.id)}))})]})})}),Object(s.jsx)(Z.a,{component:"div",count:-1,onChangePage:T,onChangeRowsPerPage:M,page:g,rowsPerPage:v,rowsPerPageOptions:[5,10,25],nextIconButtonProps:{disabled:!w},backIconButtonProps:{disabled:!S},labelDisplayedRows:function(e){var t=e.from;return 0==n.poqDetail.length?"0-0":"".concat(t,"-").concat(t+n.poqDetail.length-1)}})]}),Object(s.jsx)(le,{open:N,selected:h,isLoading:m,onMarkActive:function(){},onMarkInactive:function(){},onDelete:function(){}})]}))},be=n("k7Sn");function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var he=Object(d.a)((function(e){return{root:{},editor:{"& .ql-editor":{height:400}},addProduct:{marginLeft:e.spacing(2)}}})),xe=L.c().shape({poqname:L.e(),customerName:L.c().shape({id:L.b().nullable(),name:L.e().nullable()}).nullable().required("Cutomer name is required"),startDate:L.a().nullable().typeError("Invalid date.").required("Required."),endDate:L.a().nullable().typeError("Invalid date.").required("Required."),shippingAddress:L.e().max(255),shippingCost:L.b(),otherCosts:L.b(),totaldiscount:L.b(),vatpercentage:L.b(),productName:L.c().shape({id:L.b(),name:L.e()}).nullable(),productQty:L.b().nullable(),downPayment:L.b().required("Required."),upponSupply:L.b().required("Required."),upponComission:L.b().required("Required."),dollar:L.b().nullable(),euro:L.b().nullable(),software:L.b().nullable()});var fe=function(e){var t=e.className,n=e.poq,r=e.setPOQ,o=Object(y.a)(e,["className","poq","setPOQ"]);console.log(n);var u=he(),d=Object(b.b)().enqueueSnackbar,j=l.a.useState(n.poq.productTotalcost),m=Object(i.a)(j,2),O=m[0],h=m[1],x=l.a.useState({subtotal:n.poq.subtotal,totalvat:n.poq.vat*n.poq.subtotal/100,grandTotal:n.poq.subtotal+n.poq.vat*n.poq.subtotal/100}),g=Object(i.a)(x,2),L=g[0],z=g[1],G=l.a.useState(!1),H=Object(i.a)(G,2),J=H[0],V=H[1],K=l.a.useState({usd:n.poq.dollarTransferRate,eur:n.poq.euroTransferRate}),F=Object(i.a)(K,2),X=F[0],Z=F[1],Y=Object(Q.useForm)({mode:"all",resolver:Object(T.yupResolver)(xe),defaultValues:{poqname:n.poq.Name||"",customerName:{id:n.poq.customer.id,name:"".concat(n.poq.customer.firstName," ").concat(n.poq.customer.lastName)}||null,startDate:n.poq.startDate||new Date,endDate:n.poq.endDate||new Date,shippingAddress:n.poq.shippingAddress||"",shippingCost:n.poq.shippingCost||0,otherCosts:n.poq.otherCost||0,totaldiscount:n.poq.totalDiscount||0,productName:null,vatpercentage:n.poq.vat||0,productQty:1,submitError:"",downPayment:n.poq.downPayment||60,upponSupply:n.poq.upponSupply||30,upponComission:n.poq.upponComission||10,dollar:n.poq.dollarTransferRate||1,euro:n.poq.euroTransferRate||1,software:n.poq.software}}),$=Y.handleSubmit,ee=Y.errors,te=Y.setError,ne=Y.setValue,re=Y.getValues,ae=Y.reset,ce=Y.formState.isSubmitting;return l.a.useEffect((function(){}),[]),console.log(X),Object(s.jsx)(Q.FormProvider,Oe(Oe({},Y),{},{children:Object(s.jsxs)("form",Oe(Oe({onSubmit:$((function(e){return ie.apply(this,arguments)})),className:Object(R.a)(u.root,t)},o),{},{children:[Object(s.jsxs)(v.a,{container:!0,spacing:2,children:[Object(s.jsxs)(v.a,{item:!0,xs:12,lg:4,children:[Object(s.jsxs)(q.a,{children:[Object(s.jsx)(w.a,{title:"Basic"}),Object(s.jsx)(S.a,{}),Object(s.jsx)(P.a,{children:Object(s.jsxs)(v.a,{container:!0,spacing:3,children:[Object(s.jsx)(v.a,{item:!0,xs:12,md:12,children:Object(s.jsx)(_.a,{name:"poqname",label:"BOQ Number",variant:"outlined",disabled:!0,errorObj:ee})}),Object(s.jsx)(v.a,{item:!0,md:12,xs:12,children:Object(s.jsx)(U.a,{name:"customerName",label:"Customer",variant:"outlined",errorObj:ee})}),Object(s.jsx)(v.a,{item:!0,md:6,xs:12,children:Object(s.jsx)(W.a,{name:"startDate",label:"Start Date",variant:"outlined",errorObj:ee})}),Object(s.jsx)(v.a,{item:!0,md:6,xs:12,children:Object(s.jsx)(W.a,{name:"endDate",label:"End Date",variant:"outlined",errorObj:ee})}),Object(s.jsx)(v.a,{item:!0,md:12,xs:12,children:Object(s.jsx)(_.a,{name:"shippingAddress",label:"Shipping Address",variant:"outlined",multiline:!0,rows:2,errorObj:ee})})]})})]}),Object(s.jsx)(p.a,{mt:3,children:Object(s.jsxs)(q.a,{children:[Object(s.jsx)(w.a,{title:"Software"}),Object(s.jsx)(S.a,{}),Object(s.jsx)(P.a,{children:Object(s.jsx)(v.a,{container:!0,spacing:3,children:Object(s.jsx)(v.a,{item:!0,xs:12,md:12,children:Object(s.jsx)(_.a,{name:"software",label:"Software development",type:"number",variant:"outlined",errorObj:ee})})})})]})}),Object(s.jsxs)(p.a,{mt:3,children:[Object(s.jsxs)(q.a,{children:[Object(s.jsx)(w.a,{title:"Others"}),Object(s.jsx)(S.a,{}),Object(s.jsx)(P.a,{children:Object(s.jsxs)(v.a,{container:!0,spacing:3,children:[Object(s.jsx)(v.a,{item:!0,xs:12,md:12,children:Object(s.jsx)(_.a,{name:"shippingCost",label:"Shipping Cost",type:"number",variant:"outlined",errorObj:ee})}),Object(s.jsx)(v.a,{item:!0,xs:12,md:12,children:Object(s.jsx)(_.a,{name:"otherCosts",label:"Design - Installation - Documentation",type:"number",variant:"outlined",errorObj:ee})}),Object(s.jsx)(v.a,{item:!0,xs:12,md:12,children:Object(s.jsx)(_.a,{name:"totaldiscount",label:"Total discount amount",type:"number",variant:"outlined",errorObj:ee})}),Object(s.jsx)(v.a,{item:!0,xs:12,md:12}),Object(s.jsx)(v.a,{item:!0,xs:6,md:6,children:Object(s.jsx)(_.a,{name:"vatpercentage",label:"VAT %",type:"number",variant:"outlined",errorObj:ee})}),Object(s.jsx)(v.a,{item:!0,container:!0,xs:6,md:6,alignItems:"center"})]})})]}),Object(s.jsx)(p.a,{mt:3,children:Object(s.jsxs)(q.a,{children:[Object(s.jsx)(w.a,{title:"Total"}),Object(s.jsx)(S.a,{}),Object(s.jsx)(P.a,{children:Object(s.jsxs)(v.a,{container:!0,spacing:2,children:[Object(s.jsx)(v.a,{item:!0,xs:6,md:6,children:Object(s.jsx)(N.a,{children:"Net products cost : "})}),Object(s.jsx)(v.a,{item:!0,xs:6,md:6,children:Object(s.jsx)(N.a,{children:Math.round(100*(O+Number.EPSILON))/100})}),Object(s.jsx)(v.a,{item:!0,xs:6,md:6,children:Object(s.jsx)(N.a,{children:"Softeware Dev. cost : "})}),Object(s.jsx)(v.a,{item:!0,xs:6,md:6,children:Object(s.jsx)(N.a,{children:re().software?Number(re().software):"0"})}),Object(s.jsx)(v.a,{item:!0,xs:6,md:6,children:Object(s.jsx)(N.a,{children:"Shipping and Installation : "})}),Object(s.jsx)(v.a,{item:!0,xs:6,md:6,children:Object(s.jsx)(N.a,{children:re().otherCosts?Number(re().otherCosts)+Number(re().shippingCost):n.poq.shippingCost+n.poq.otherCost})}),Object(s.jsx)(v.a,{item:!0,xs:6,md:6,children:Object(s.jsx)(N.a,{children:"Sub Total : "})}),Object(s.jsx)(v.a,{item:!0,xs:6,md:6,children:Object(s.jsx)(N.a,{children:Math.round(100*(L.subtotal+Number.EPSILON))/100})}),Object(s.jsx)(v.a,{item:!0,xs:6,md:6,children:Object(s.jsx)(N.a,{children:"Taxes : "})}),Object(s.jsx)(v.a,{item:!0,xs:6,md:6,children:Object(s.jsx)(N.a,{name:"vat",children:Math.round(100*(L.totalvat+Number.EPSILON))/100})}),Object(s.jsx)(v.a,{item:!0,xs:6,md:6,children:Object(s.jsx)(N.a,{children:"Grand total : "})}),Object(s.jsx)(v.a,{item:!0,xs:6,children:Object(s.jsx)(N.a,{name:"grandtotal",children:Math.round(100*(L.grandTotal+Number.EPSILON))/100})})]})})]})})]}),Object(s.jsx)(p.a,{mt:3,children:Object(s.jsxs)(q.a,{children:[Object(s.jsx)(w.a,{title:"Payment Terms"}),Object(s.jsx)(S.a,{}),Object(s.jsx)(P.a,{children:Object(s.jsxs)(v.a,{container:!0,spacing:3,children:[Object(s.jsx)(v.a,{item:!0,xs:4,children:Object(s.jsx)(_.a,{name:"downPayment",label:" Down payment %",type:"number",variant:"outlined",errorObj:ee})}),Object(s.jsx)(v.a,{item:!0,xs:4,children:Object(s.jsx)(_.a,{name:"upponSupply",label:" Uppon Supply %",type:"number",variant:"outlined",errorObj:ee})}),Object(s.jsx)(v.a,{item:!0,xs:4,children:Object(s.jsx)(_.a,{name:"upponComission",label:" Uppon Comission %",type:"number",variant:"outlined",errorObj:ee})}),Object(s.jsx)(v.a,{item:!0,xs:6,md:6,children:Object(s.jsx)(N.a,{children:"Down Payment Amount : "})}),Object(s.jsx)(v.a,{item:!0,xs:6,md:6,children:Object(s.jsx)(N.a,{children:L.grandTotal&&re().downPayment?Math.round(L.grandTotal*re().downPayment+100*Number.EPSILON)/100+" EGP":"0"})}),Object(s.jsx)(v.a,{item:!0,xs:6,md:6,children:Object(s.jsx)(N.a,{children:"Uppon Supply amount : "})}),Object(s.jsx)(v.a,{item:!0,xs:6,md:6,children:Object(s.jsx)(N.a,{children:L.grandTotal&&re().upponSupply?Math.round(L.grandTotal*re().upponSupply+100*Number.EPSILON)/100+" EGP":"0"})}),Object(s.jsx)(v.a,{item:!0,xs:6,md:6,children:Object(s.jsx)(N.a,{children:"Uppon comission amount :"})}),Object(s.jsx)(v.a,{item:!0,xs:6,md:6,children:Object(s.jsx)(N.a,{children:L.grandTotal&&re().upponComission?Math.round(L.grandTotal*re().upponComission+100*Number.EPSILON)/100+" EGP":"0"})}),Object(s.jsx)(v.a,{item:!0,xs:6,md:8,children:Object(s.jsx)(k.a,{variant:"contained",color:"secondary",type:"button",onClick:function(){V(!0),function(){var e=0;n.poqDetail.forEach((function(t){2==t.currency&&(e+=t.saleprice*X.usd*t.qnty),3==t.currency?e+=t.saleprice*X.eur*t.qnty:e+=t.saleprice*t.qnty})),h(e);var t=e+Number(re().otherCosts)+Number(re().shippingCost)-Number(re().totaldiscount),r=t*re().vatpercentage/100;z({subtotal:t,totalvat:r,grandTotal:t+r})}()},className:u.calcButton,children:"Calculate"})})]})})]})})]}),Object(s.jsxs)(v.a,{item:!0,xs:12,lg:8,children:[Object(s.jsx)(v.a,{xs:12,children:Object(s.jsxs)(q.a,{children:[Object(s.jsx)(w.a,{title:"Transfer Rates"}),Object(s.jsx)(S.a,{}),Object(s.jsx)(P.a,{children:Object(s.jsxs)(v.a,{container:!0,spacing:2,children:[Object(s.jsx)(v.a,{item:!0,md:6,xs:6,children:Object(s.jsx)(_.a,{name:"dollar",label:"USD",type:"number",variant:"outlined",value:X.usd,onChange:function(e){Z(Oe(Oe({},X),{},{usd:Number(e.target.value)}))}})}),Object(s.jsx)(v.a,{item:!0,md:6,xs:6,children:Object(s.jsx)(_.a,{name:"euro",label:"EUR",type:"number",variant:"outlined",value:X.eur,onChange:function(e){Z(Oe(Oe({},X),{},{eur:Number(e.target.value)}))}})})]})})]})}),Object(s.jsxs)(q.a,{children:[Object(s.jsx)(w.a,{title:"Products"}),Object(s.jsx)(S.a,{}),Object(s.jsxs)(P.a,{children:[Object(s.jsxs)(v.a,{container:!0,spacing:2,children:[Object(s.jsx)(v.a,{item:!0,md:9,xs:12,children:Object(s.jsx)(A.a,{name:"productName",label:"Product",variant:"outlined",errorObj:ee})}),Object(s.jsx)(v.a,{item:!0,md:2,xs:12,children:Object(s.jsx)(_.a,{name:"productQty",label:"Quantity",type:"number",variant:"outlined",errorObj:ee})}),Object(s.jsx)(v.a,{item:!0,md:1,xs:12,alignItems:"center",children:Object(s.jsx)(C.a,{color:"secondary",onClick:function(){V(!1),function(){se.apply(this,arguments)}()},children:Object(s.jsx)(D.a,{fontSize:"large",children:Object(s.jsx)(M.a,{})})})})]}),Object(s.jsx)(p.a,{mt:2,children:Object(s.jsx)(pe,{query:n,setPOQ:r,transferRate:X})})]})]})]})]}),ee.submitError&&Object(s.jsx)(p.a,{mt:1,display:"flex",justifyContent:"center",children:Object(s.jsx)(E.a,{style:{fontSize:"24px"},error:!0,children:ee.submitError.message})}),Object(s.jsx)(p.a,{mt:5,children:ce?Object(s.jsx)(I.a,{}):Object(s.jsx)(k.a,{variant:"contained",color:"secondary",type:"submit",disabled:!J,children:"Edit"})})]}))}));function se(){return(se=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re().productName){e.next=2;break}return e.abrupt("return");case 2:t={poq:n.poq.id,product:re().productName.id,qnty:Number(re().productQty),enduserprice:re().productName.price,saleprice:function(){switch(Number(re().productName.currency.id)){case 1:return re().productName.price;case 2:return re().productName.price*X.usd;case 3:return re().productName.price*X.eur}}()},B.a.get("".concat("https://dry-journey-56904.herokuapp.com","/poqdetails?_where[product]=").concat(t.product,"&[poq]=").concat(t.poq)).then(function(){var e=Object(c.a)(a.a.mark((function e(c){var s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==c.data.length){e.next=9;break}return e.next=3,B.a.post("".concat("https://dry-journey-56904.herokuapp.com","/poqdetails"),t);case 3:s=e.sent,r(Oe(Oe({},n),{},{poqDetail:[].concat(Object(f.a)(n.poqDetail),[s.data])})),ne("productName",{}),ne("productQty",0),e.next=10;break;case 9:d("Part already exsists",{variant:"error"});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return(ie=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{ne("submitError",""),r={Name:t.poqname,customer:t.customerName.id,shippingAddress:t.shippingAddress,startDate:t.startDate,endDate:t.endDate,shippingCost:t.shippingCost,otherCost:t.otherCosts,subtotal:L.subtotal,grandTotal:L.grandTotal,totalDiscount:t.totaldiscount,vat:t.vatpercentage,downPayment:t.downPayment,upponSupply:t.upponSupply,upponComission:t.upponComission,dollarTransferRate:X.usd,euroTransferRate:X.eur,software:t.software},B.a.put("".concat("https://dry-journey-56904.herokuapp.com","/poqs/").concat(n.poq.id),r).then((function(e){Promise.all(n.poqDetail.map(function(){var e=Object(c.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={poq:n.poq.id,product:t.product.id,qnty:t.qnty,enduserprice:t.product.price,saleprice:t.saleprice,salepercentage:t.salepercentage?t.salepercentage:0,transferRate:2==t.currency?X.usd:3==t.currency?X.eur:1},e.next=3,B.a.put("".concat("https://dry-journey-56904.herokuapp.com","/poqdetails/").concat(t.id),r);case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))})),d("Edit successfully done",{variant:"success"}),ae(),be.Router.push("/poqs")}catch(s){d("Error edit Qutation",{variant:"error"}),te("submitError",{type:"submit",message:"Error edit Qutation"})}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},ge=n("1DBx"),ye=n("Txxr"),ve=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)}}})),qe=[{title:"Dashboard",href:"/dashboard"},{title:"Management",href:"#"},{title:"Quotations",href:"/poqs"},{title:"Edit"}];function we(){var e=ve(),t=Object(b.b)().enqueueSnackbar,n=Object(u.useRouter)(),r=(Object(ye.a)(),l.a.useState(!0)),o=Object(i.a)(r,2),d=o[0],x=o[1],f=l.a.useState({}),g=Object(i.a)(f,2),y=g[0],v=g[1],q=n.query.poqId;return l.a.useEffect((function(){q&&function(){w.apply(this,arguments)}()}),[q]),Object(s.jsx)(s.Fragment,{children:d?Object(s.jsx)(O.a,{}):Object(s.jsx)(h.a,{className:e.root,title:"Quotations - Edit",children:Object(s.jsxs)(j.a,{maxWidth:!1,children:[Object(s.jsx)(m.a,{links:qe,mainText:"Edit Quotation"}),Object(s.jsx)(p.a,{mt:3,children:Object(s.jsx)(fe,{poq:y,setPOQ:v})})]})})});function w(){return(w=Object(c.a)(a.a.mark((function e(){var n,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,q){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,B.a.get("".concat("https://dry-journey-56904.herokuapp.com","/poqs/").concat(q));case 5:if(200!==(n=e.sent).status){e.next=13;break}return e.next=9,B.a.get("".concat("https://dry-journey-56904.herokuapp.com","/poqdetails?_where[poq]=").concat(n.data.id));case 9:r=e.sent,c=r.data,v({poq:n.data,poqDetail:c}),x(!1);case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),x(!1),console.error(e.t0),t("error in loading Qutaion",{variant:"error"});case 20:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}}we.Guard=x.a,we.Layout=ge.a;t.default=we}},[["WJNg",1,0,4,2,3,5,6,7,8,9,10,11,12,13,14,15,16,19,25]]]);