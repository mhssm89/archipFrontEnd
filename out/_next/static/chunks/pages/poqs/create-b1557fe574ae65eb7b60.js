_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[60],{"1coN":function(e,t,r){"use strict";!function(){function t(e){return Array.prototype.map.call((e+"").trim().split(""),(function(e){return parseInt(e,10)}))}function r(e){if(null==e)return 0;var r=10-t(e).reverse().map((function(e,t){return t%2===0?2*e:e})).reduce((function(e,r){return e+function(e){return t(e).reduce((function(e,t){return e+t}))}(r)}),0)%10;return 10===r?0:r}e.exports={isValid:function(e){if(null==e)return!1;var n=t(e);return n.pop()===r(n.join(""))},checkSum:r,generate:function(e){for(var t=e-1,n=new Array(t),a=0;a<t;a++)n.push(Math.floor(10*Math.random()));var c=n.join("");return c+""+r(c)}}}()},FHfM:function(e,t,r){"use strict";r.r(t);var n=r("nKUr"),a=r("q1tI"),c=r.n(a),s=r("R/WZ"),i=r("Ji2X"),o=r("hlFM"),l=r("sxe4"),j=r("79WI"),d=r("Mya6"),u=r("z7pX"),b=r("vJKn"),O=r.n(b),p=r("rg98"),m=r("cpVT"),h=r("xvhg"),x=r("dhJC"),f=r("tRbT"),g=r("30+C"),y=r("50B7"),v=r("wb2y"),w=r("oa/T"),P=r("ofer"),S=r("Z3vd"),N=r("PsDL"),C=r("HR5l"),D=r("Spdj"),E=r("iae6"),I=r("wd/R"),k=r.n(I),q=r("bgvd"),T=r("iuhU"),R=r("NKQG"),M=r("Rzx/"),A=r("NKCw"),L=r("UGp+"),U=(r("Y8H/"),r("MMHs")),Q=r("sn/O"),B=r("k80k"),_=r("XNQK"),G=(r("1coN"),r("/EAt")),H=r("Imu7"),V=r("sRsu"),z=r("3PeG"),J=r("VmPI"),K=r("Uf6+"),F=r("r9w1"),W=r("ELmG"),X=r("KcsI"),Y=r("cuOD"),Z=r.n(Y),$=r("2Wm+"),ee=r("IIOH"),te=r("1NhI"),re=r("JoNN"),ne=r("wHH0");function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){Object(m.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var se=Object(s.a)((function(e){return{root:{padding:e.spacing(2)},actions:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > * + *":{marginLeft:e.spacing(2)}}}}));var ie=function(e){var t=e.className,r=e.onDelete,a=void 0===r?function(){}:r,c=e.onMarkActive,s=void 0===c?function(){}:c,i=e.onMarkInactive,o=void 0===i?function(){}:i,l=e.open,j=void 0!==l&&l,d=e.selected,u=e.isLoading,b=void 0!==u&&u,O=Object(x.a)(e,["className","onDelete","onMarkActive","onMarkInactive","open","selected","isLoading"]),p=se();return Object(n.jsx)(ee.a,{anchor:"bottom",open:j,PaperProps:{elevation:1},variant:"persistent",children:Object(n.jsx)("div",ce(ce({className:Object(T.a)(p.root,t)},O),{},{children:Object(n.jsxs)(f.a,{alignItems:"center",container:!0,spacing:2,children:[Object(n.jsx)(te.a,{smDown:!0,children:Object(n.jsx)(f.a,{item:!0,md:3,children:Object(n.jsxs)(P.a,{color:"textSecondary",variant:"subtitle1",children:[d.length," selected"]})})}),Object(n.jsx)(f.a,{item:!0,md:6,xs:12,children:Object(n.jsx)("div",{className:p.actions,children:b?Object(n.jsx)(E.a,{}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(S.a,{onClick:s,startIcon:Object(n.jsx)(C.a,{fontSize:"small",children:Object(n.jsx)(re.a,{})}),children:"Mark Active"}),Object(n.jsx)(S.a,{onClick:o,startIcon:Object(n.jsx)(C.a,{fontSize:"small",children:Object(n.jsx)(ne.a,{})}),children:"Mark Inactive"}),Object(n.jsx)(S.a,{onClick:a,startIcon:Object(n.jsx)(C.a,{fontSize:"small",children:Object(n.jsx)(X.a,{})}),children:"Delete"})]})})})]})}))})};function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){Object(m.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var je=Object(s.a)((function(){return{root:{}}}));var de=function(e){var t=e.className,r=e.query,a=e.setproduct,s=e.transferRate,i=Object(x.a)(e,["className","query","setproduct","transferRate"]),l=je(),j=Object(R.b)().enqueueSnackbar,d=c.a.useState(!1),b=Object(h.a)(d,2),O=b[0],p=(b[1],Object($.a)({query:r})),m=p.selectedItems,f=p.isAllItemsSelected,y=p.isSomeItemsSelected,v=p.page,w=p.limit,P=p.hasNext,S=p.hasPrev,D=p.isLoading,I=(p.setItems,p.setSelectedItems,p.enableBulkOperations),k=p.handleSelectAllItems,q=p.handleSelectOneItem,M=p.handlePageChange,A=p.handleLimitChange;return console.log(r),Object(n.jsxs)("div",le(le({className:Object(T.a)(l.root,t)},i),{},{children:[Object(n.jsxs)(g.a,{children:[Object(n.jsx)(Z.a,{children:Object(n.jsx)(o.a,{minWidth:700,children:Object(n.jsxs)(G.a,{children:[Object(n.jsx)(H.a,{children:Object(n.jsxs)(V.a,{children:[Object(n.jsx)(z.a,{padding:"checkbox",children:Object(n.jsx)(J.a,{checked:f,indeterminate:y,onChange:k})}),Object(n.jsx)(z.a,{children:"Part #"}),Object(n.jsx)(z.a,{children:"Quantity"}),Object(n.jsx)(z.a,{children:"Price"}),Object(n.jsx)(z.a,{children:"Currency"}),Object(n.jsx)(z.a,{children:"Discount (%)"}),Object(n.jsx)(z.a,{children:"Sale Percentage (%) "}),Object(n.jsx)(z.a,{children:"Sale price "}),Object(n.jsx)(z.a,{align:"right",children:"Actions"})]})}),D?Object(n.jsx)(o.a,{display:"flex",justifyContent:"center",mt:4,children:Object(n.jsx)(E.a,{})}):Object(n.jsx)(K.a,{children:r.map((function(e){var t=m.includes(e.id);return console.log(r),Object(n.jsxs)(V.a,{hover:!0,selected:-1!==m.indexOf(e.id),children:[Object(n.jsx)(z.a,{padding:"checkbox",children:Object(n.jsx)(J.a,{checked:t,onChange:function(t){return q(t,e.id)},value:t})}),Object(n.jsx)(z.a,{children:e.partNumber}),Object(n.jsx)(z.a,{children:e.qnty}),Object(n.jsx)(z.a,{children:e.price}),Object(n.jsx)(z.a,{children:e.currency.name}),Object(n.jsx)(z.a,{children:e.discount}),Object(n.jsx)(z.a,{style:{width:"20%"},children:Object(n.jsx)(F.a,{type:"number",name:"salepercent".concat(e.id),defaultValue:0,variant:"outlined",style:{width:"70%",textAlign:"center"},onChange:function(t){e.saleprice=e.price*Number(t.target.value)/100+e.price,e.salepercentage=Number(t.target.value),a(Object(u.a)(r))}})}),Object(n.jsx)(z.a,{children:function(){if(e.saleprice){if("USD"===e.currency.name)return e.saleprice*s.usd*e.qnty;if("EUR"===e.currency.name)return e.saleprice*s.eur*e.qnty}else{if("USD"===e.currency.name)return e.price*s.usd*e.qnty;if("EUR"===e.currency.name)return e.price*s.eur*e.qnty}}()}),Object(n.jsx)(z.a,{align:"right",children:Object(n.jsx)(N.a,{onClick:function(){return t=e.id,a(r.filter((function(e){return e.id!=t}))),void j("deleted",{variant:"error"});var t},children:Object(n.jsx)(C.a,{fontSize:"small",children:Object(n.jsx)(X.a,{})})})})]},e.id)}))})]})})}),Object(n.jsx)(W.a,{component:"div",count:-1,onChangePage:M,onChangeRowsPerPage:A,page:v,rowsPerPage:w,rowsPerPageOptions:[5,10,25],nextIconButtonProps:{disabled:!P},backIconButtonProps:{disabled:!S},labelDisplayedRows:function(e){var t=e.from;return 0==r.length?"0-0":"".concat(t,"-").concat(t+r.length-1)}})]}),Object(n.jsx)(ie,{open:I,selected:m,isLoading:O,onMarkActive:function(){},onMarkInactive:function(){},onDelete:function(){}})]}))},ue=r("vDqi"),be=r.n(ue);function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){Object(m.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var me=Object(s.a)((function(e){return{root:{},editor:{"& .ql-editor":{height:400}},addProduct:{marginLeft:e.spacing(2)},calcButton:{width:"85%"}}})),he=L.c().shape({customerName:L.c().nullable().required("Required."),startDate:L.a().nullable().typeError("Invalid date.").required("Required."),endDate:L.a().nullable().typeError("Invalid date.").required("Required."),shippingAddress:L.e().max(255),shippingCost:L.b(),otherCosts:L.b(),totaldiscount:L.b(),vatpercentage:L.b(),productName:L.c().shape({id:L.b(),name:L.e()}),productQty:L.b(),downPayment:L.b().required("Required."),upponSupply:L.b().required("Required."),upponComission:L.b().required("Required."),dollar:L.b().nullable(),euro:L.b().nullable(),software:L.b().nullable()});var xe=function(e){var t=e.className,r=Object(x.a)(e,["className"]),a=me(),s=Object(R.b)().enqueueSnackbar,i=c.a.useState([]),l=Object(h.a)(i,2),j=l[0],d=l[1],b=c.a.useState({}),m=Object(h.a)(b,2),I=m[0],L=m[1],G=c.a.useState(0),H=Object(h.a)(G,2),V=H[0],z=H[1],J=c.a.useState(0),K=Object(h.a)(J,2),F=(K[0],K[1],c.a.useState(!1)),W=Object(h.a)(F,2),X=W[0],Y=W[1],Z=c.a.useState({usd:1,eur:1}),$=Object(h.a)(Z,2),ee=$[0],te=$[1],re=Object(A.useForm)({mode:"all",resolver:Object(q.yupResolver)(he),defaultValues:{customerName:null,startDate:new Date,endDate:k()().add(7,"days"),shippingAddress:"",shippingCost:0,otherCosts:0,totaldiscount:0,submitError:"",productName:null,vatpercentage:14,productQty:1,downPayment:60,upponSupply:30,upponComission:10,software:0}}),ne=re.handleSubmit,ae=re.errors,ce=re.setError,se=re.setValue,ie=re.getValues,oe=re.reset,le=(re.watch,re.formState.isSubmitting);return"1"==JSON.parse(localStorage.getItem("user")).role.id?console.log("1"):console.log("else"),Object(n.jsx)(A.FormProvider,pe(pe({},re),{},{children:Object(n.jsxs)("form",pe(pe({onSubmit:ne((function(e){return Oe.apply(this,arguments)})),className:Object(T.a)(a.root,t)},r),{},{children:[Object(n.jsxs)(f.a,{container:!0,spacing:2,children:[Object(n.jsxs)(f.a,{item:!0,xs:12,lg:4,children:[Object(n.jsxs)(g.a,{children:[Object(n.jsx)(y.a,{title:"Basic"}),Object(n.jsx)(v.a,{}),Object(n.jsx)(w.a,{children:Object(n.jsxs)(f.a,{container:!0,spacing:3,children:[Object(n.jsx)(f.a,{item:!0,md:12,xs:12,children:Object(n.jsx)(B.a,{name:"customerName",label:"Customer",variant:"outlined",errorObj:ae,setCustomerAddress:se})}),Object(n.jsx)(f.a,{item:!0,md:6,xs:12,children:Object(n.jsx)(U.a,{name:"startDate",label:"Start Date",variant:"outlined",errorObj:ae,disabled:!0})}),Object(n.jsx)(f.a,{item:!0,md:6,xs:12,children:Object(n.jsx)(U.a,{name:"endDate",label:"End Date",variant:"outlined",errorObj:ae})}),Object(n.jsx)(f.a,{item:!0,md:12,xs:12,children:Object(n.jsx)(Q.a,{name:"shippingAddress",label:"Shipping Address",variant:"outlined",multiline:!0,rows:2,errorObj:ae})})]})})]}),Object(n.jsx)(o.a,{mt:3,children:Object(n.jsxs)(g.a,{children:[Object(n.jsx)(y.a,{title:"Software"}),Object(n.jsx)(v.a,{}),Object(n.jsx)(w.a,{children:Object(n.jsx)(f.a,{container:!0,spacing:3,children:Object(n.jsx)(f.a,{item:!0,xs:12,md:12,children:Object(n.jsx)(Q.a,{name:"software",label:"Software development",type:"number",variant:"outlined",errorObj:ae})})})})]})}),Object(n.jsx)(o.a,{mt:3,children:Object(n.jsxs)(g.a,{children:[Object(n.jsx)(y.a,{title:"Others"}),Object(n.jsx)(v.a,{}),Object(n.jsx)(w.a,{children:Object(n.jsxs)(f.a,{container:!0,spacing:3,children:[Object(n.jsx)(f.a,{item:!0,xs:12,md:12,children:Object(n.jsx)(Q.a,{name:"shippingCost",label:"Shipping Cost",type:"number",variant:"outlined",errorObj:ae})}),Object(n.jsx)(f.a,{item:!0,xs:12,md:12,children:Object(n.jsx)(Q.a,{name:"otherCosts",label:"Design - Installation - Documentation",type:"number",variant:"outlined",errorObj:ae})}),Object(n.jsx)(f.a,{item:!0,xs:12,md:12,children:Object(n.jsx)(Q.a,{name:"totaldiscount",label:"Total discount amount",type:"number",variant:"outlined",errorObj:ae})})]})})]})}),Object(n.jsx)(o.a,{mt:3,children:Object(n.jsxs)(g.a,{children:[Object(n.jsx)(y.a,{title:"Taxes"}),Object(n.jsx)(v.a,{}),Object(n.jsx)(w.a,{children:Object(n.jsx)(f.a,{container:!0,spacing:3,children:Object(n.jsx)(f.a,{item:!0,xs:6,md:8,children:Object(n.jsx)(Q.a,{name:"vatpercentage",label:"VAT %",type:"number",variant:"outlined",errorObj:ae})})})})]})}),Object(n.jsx)(o.a,{mt:3,children:Object(n.jsxs)(g.a,{children:[Object(n.jsx)(y.a,{title:"Total"}),Object(n.jsx)(v.a,{}),Object(n.jsx)(w.a,{children:Object(n.jsxs)(f.a,{container:!0,spacing:2,children:[Object(n.jsx)(f.a,{item:!0,xs:6,md:6,children:Object(n.jsx)(P.a,{children:"Net products cost : "})}),Object(n.jsx)(f.a,{item:!0,xs:6,md:6,children:Object(n.jsx)(P.a,{children:Math.round(100*(V+Number.EPSILON))/100})}),Object(n.jsx)(f.a,{item:!0,xs:6,md:6,children:Object(n.jsx)(P.a,{children:"Softeware Dev. cost : "})}),Object(n.jsx)(f.a,{item:!0,xs:6,md:6,children:Object(n.jsx)(P.a,{children:ie().software?Number(ie().software):"0"})}),Object(n.jsx)(f.a,{item:!0,xs:6,md:6,children:Object(n.jsx)(P.a,{children:"Shipping and Installation : "})}),Object(n.jsx)(f.a,{item:!0,xs:6,md:6,children:Object(n.jsx)(P.a,{children:ie().otherCosts?Number(ie().otherCosts)+Number(ie().shippingCost):"0"})}),Object(n.jsx)(f.a,{item:!0,xs:6,md:6,children:Object(n.jsx)(P.a,{children:"Sub Total : "})}),Object(n.jsx)(f.a,{item:!0,xs:6,md:6,children:Object(n.jsx)(P.a,{children:I.subtotal?Math.round(100*(I.subtotal+Number.EPSILON))/100:"0"})}),Object(n.jsx)(f.a,{item:!0,xs:6,md:6,children:Object(n.jsx)(P.a,{children:"Taxes : "})}),Object(n.jsx)(f.a,{item:!0,xs:6,md:6,children:Object(n.jsx)(P.a,{name:"vat",children:I.totalvat?Math.round(100*(I.totalvat+Number.EPSILON))/100:"0"})}),Object(n.jsx)(f.a,{item:!0,xs:6,md:6,children:Object(n.jsx)(P.a,{children:"Grand total : "})}),Object(n.jsx)(f.a,{item:!0,xs:6,children:Object(n.jsx)(P.a,{name:"grandtotal",children:I.grandTotal?Math.round(100*(I.grandTotal+Number.EPSILON))/100:"0"})})]})})]})}),Object(n.jsx)(o.a,{mt:3,children:Object(n.jsxs)(g.a,{children:[Object(n.jsx)(y.a,{title:"Payment Terms"}),Object(n.jsx)(v.a,{}),Object(n.jsx)(w.a,{children:Object(n.jsxs)(f.a,{container:!0,spacing:3,children:[Object(n.jsx)(f.a,{item:!0,xs:4,children:Object(n.jsx)(Q.a,{name:"downPayment",label:" Down payment %",type:"number",variant:"outlined",errorObj:ae})}),Object(n.jsx)(f.a,{item:!0,xs:4,children:Object(n.jsx)(Q.a,{name:"upponSupply",label:" Uppon Supply %",type:"number",variant:"outlined",errorObj:ae})}),Object(n.jsx)(f.a,{item:!0,xs:4,children:Object(n.jsx)(Q.a,{name:"upponComission",label:" Uppon Commission %",type:"number",variant:"outlined",errorObj:ae})}),Object(n.jsx)(f.a,{item:!0,xs:6,md:6,children:Object(n.jsx)(P.a,{children:"Down Payment Amount : "})}),Object(n.jsx)(f.a,{item:!0,xs:6,md:6,children:Object(n.jsx)(P.a,{children:I.grandTotal?Math.round(I.grandTotal*ie().downPayment+100*Number.EPSILON)/100+" EGP":"0"})}),Object(n.jsx)(f.a,{item:!0,xs:6,md:6,children:Object(n.jsx)(P.a,{children:"Uppon Supply amount : "})}),Object(n.jsx)(f.a,{item:!0,xs:6,md:6,children:Object(n.jsx)(P.a,{children:I.grandTotal?Math.round(I.grandTotal*ie().upponSupply+100*Number.EPSILON)/100+" EGP":"0"})}),Object(n.jsx)(f.a,{item:!0,xs:6,md:6,children:Object(n.jsx)(P.a,{children:"Uppon comission "})}),Object(n.jsx)(f.a,{item:!0,xs:6,md:6,children:Object(n.jsx)(P.a,{children:I.grandTotal?Math.round(I.grandTotal*ie().upponComission+100*Number.EPSILON)/100+" EGP":"0"})}),Object(n.jsx)(f.a,{item:!0,xs:6,md:8,children:Object(n.jsx)(S.a,{variant:"contained",color:"secondary",type:"button",onClick:function(){Y(!0),function(){je.apply(this,arguments)}()},className:a.calcButton,children:"Calculate"})})]})})]})})]}),Object(n.jsxs)(f.a,{item:!0,xs:12,lg:8,children:[Object(n.jsx)(f.a,{xs:12,children:Object(n.jsxs)(g.a,{children:[Object(n.jsx)(y.a,{title:"Transfer Rates"}),Object(n.jsx)(v.a,{}),Object(n.jsx)(w.a,{children:Object(n.jsxs)(f.a,{container:!0,spacing:2,children:[Object(n.jsx)(f.a,{item:!0,md:6,xs:6,children:Object(n.jsx)(Q.a,{name:"dollar",label:"USD",type:"number",variant:"outlined",errorObj:ae,onChange:function(e){te(pe(pe({},ee),{},{usd:Number(e.target.value)}))}})}),Object(n.jsx)(f.a,{item:!0,md:6,xs:6,children:Object(n.jsx)(Q.a,{name:"euro",label:"EUR",type:"number",variant:"outlined",onChange:function(e){te(pe(pe({},ee),{},{eur:Number(e.target.value)}))},errorObj:ae})})]})})]})}),Object(n.jsxs)(g.a,{style:{marginTop:"2%"},children:[Object(n.jsx)(y.a,{title:"Products"}),Object(n.jsx)(v.a,{}),Object(n.jsxs)(w.a,{children:[Object(n.jsxs)(f.a,{container:!0,spacing:2,children:[Object(n.jsx)(f.a,{item:!0,md:9,xs:12,children:Object(n.jsx)(_.a,{name:"productName",label:"Product",variant:"outlined",errorObj:ae})}),Object(n.jsx)(f.a,{item:!0,md:2,xs:12,children:Object(n.jsx)(Q.a,{name:"productQty",label:"Quantity",type:"number",variant:"outlined",errorObj:ae})}),Object(n.jsx)(f.a,{item:!0,md:1,xs:12,alignItems:"center",children:Object(n.jsx)(N.a,{color:"secondary",onClick:function(){Y(!1),function(){ue.apply(this,arguments)}()},children:Object(n.jsx)(C.a,{fontSize:"large",children:Object(n.jsx)(M.a,{})})})})]}),Object(n.jsx)(o.a,{mt:2,children:Object(n.jsx)(de,{query:j,setproduct:d,transferRate:ee})})]})]})]})]}),ae.submitError&&Object(n.jsx)(o.a,{mt:1,display:"flex",justifyContent:"center",children:Object(n.jsx)(D.a,{style:{fontSize:"24px"},error:!0,children:ae.submitError.message})}),Object(n.jsx)(o.a,{mt:5,children:le?Object(n.jsx)(E.a,{}):Object(n.jsx)(S.a,{variant:"contained",color:"secondary",type:"submit",disabled:!X,children:"Create"})})]}))}));function je(){return(je=Object(p.a)(O.a.mark((function e(){var t,r,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0,j.forEach((function(e){"USD"===e.currency.name&&(t+=e.saleprice*ee.usd*Number(e.qnty)),"EUR"===e.currency.name&&(t+=e.saleprice*ee.eur*Number(e.qnty)),"EGP"===e.currency.name&&(t+=e.saleprice*Number(e.qnty))})),z(t),r=t+Number(ie().software)+Number(ie().otherCosts)+Number(ie().shippingCost)-Number(ie().totaldiscount),n=r*ie().vatpercentage/100,L({subtotal:r,totalvat:n,grandTotal:r+n});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return(ue=Object(p.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=ie().productName,d([].concat(Object(u.a)(j),[pe(pe({},t),{},{qnty:ie("productQty"),saleprice:t.price})]));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(){return(Oe=Object(p.a)(O.a.mark((function e(t){var r,n,a,c,i,o,l,u,b,m,h,x,f;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.customerName,n=t.shippingAddress,a=t.startDate,c=t.endDate,i=t.shippingCost,o=t.otherCosts,l=t.totaldiscount,u=t.vatpercentage,b=t.downPayment,m=t.upponSupply,h=t.upponComission,x=t.software;try{se("submitError",""),f={customer:r.id,shippingAddress:n,startDate:a,endDate:c,shippingCost:i,otherCost:o,productTotalcost:V,subtotal:I.subtotal,grandTotal:I.grandTotal,totalDiscount:l,vat:u,downPayment:b,upponSupply:m,upponComission:h,dollarTransferRate:ee.usd,euroTransferRate:ee.eur,software:x},be.a.post("".concat("http://localhost:1337","/poqs"),f).then((function(e){var t={Name:"".concat(e.data.id,"-Archip")};be.a.put("".concat("http://localhost:1337","/poqs/").concat(e.data.id),t),Promise.all(j.map(function(){var t=Object(p.a)(O.a.mark((function t(r){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={poq:e.data.id,product:r.id,qnty:r.qnty,enduserprice:r.price,saleprice:function(){switch(r.currency.id){case 1:return r.price;case 2:return r.price*ee.usd;case 3:return r.price*ee.eur}}(),salepercentage:r.salepercentage?r.salepercentage:0,transferRate:"USD"==r.currency.name?ee.usd:"eur"==r.currency.name?ee.eur:1},console.log(n),be.a.post("".concat("http://localhost:1337","/poqdetails"),n).catch((function(e){console.log(e),s("Error creating new BOQ.",{variant:"error"})}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))})),s("BOQ created successfully.",{variant:"success"}),oe(),d([]),L({}),z(0)}catch(g){s("Error creating new BOQ.",{variant:"error"}),ce("submitError",{type:"submit",message:"Error creating new BOQ."})}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},fe=r("1DBx"),ge=Object(s.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)}}})),ye=[{title:"Dashboard",href:"/dashboard"},{title:"Management",href:"#"},{title:"Quotations",href:"/poqs"},{title:"Create"}];function ve(){var e=ge();return Object(n.jsx)(j.a,{className:e.root,title:"Quotation - Create",children:Object(n.jsxs)(i.a,{maxWidth:!1,children:[Object(n.jsx)(l.a,{links:ye,mainText:"Create Quotation"}),Object(n.jsx)(o.a,{mt:3,children:Object(n.jsx)(xe,{})})]})})}ve.Guard=d.a,ve.Layout=fe.a;t.default=ve},"Y8H/":function(e,t,r){"use strict";var n=r("nKUr"),a=r("cpVT"),c=r("dhJC"),s=r("ADg1"),i=r("r9w1"),o=r("Spdj"),l=r("+bXu"),j=r("NKCw"),d=r("eRyV");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.a=function(e){var t=e.name,r=e.label,a=void 0===r?"":r,u=e.options,O=e.errorObj,p=void 0===O?{}:O,m=Object(c.a)(e,["name","label","options","errorObj"]),h=Object(j.useFormContext)().control,x=Object(j.useController)({name:t,control:h}).field,f=x.ref,g=x.onChange,y=Object(c.a)(x,["ref","onChange"]),v=Object(d.a)(t,p),w=v.isError,P=v.errorMessage;return Object(n.jsxs)(s.a,{fullWidth:!0,error:w,children:[Object(n.jsx)(l.a,b(b({},y),{},{ref:f,options:u,onChange:function(e,t){return g(t)},getOptionLabel:function(e){return e.label},getOptionSelected:function(e,t){return e.value==t.value},renderOption:function(e){return Object(n.jsx)("span",{children:e.label})},renderInput:function(e){return Object(n.jsx)(i.a,b(b({},e),{},{label:a,variant:"outlined",error:w}))}},m)),w&&Object(n.jsx)(o.a,{error:!0,children:P})]})}},om8Q:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/poqs/create",function(){return r("FHfM")}])}},[["om8Q",1,0,4,20,2,3,5,6,7,8,9,10,11,12,13,14,15,16,19,21,25]]]);