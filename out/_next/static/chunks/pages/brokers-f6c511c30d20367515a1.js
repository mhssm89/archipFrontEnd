_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[42],{Fn3X:function(e,t,r){"use strict";var n=r("q1tI"),a=r.n(n),c=r("17x9"),o=r.n(c);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=Object(n.forwardRef)((function(e,t){var r=e.color,n=void 0===r?"currentColor":r,c=e.size,o=void 0===c?24:c,l=s(e,["color","size"]);return a.a.createElement("svg",i({ref:t,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),a.a.createElement("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),a.a.createElement("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}))}));l.propTypes={color:o.a.string,size:o.a.oneOfType([o.a.string,o.a.number])},l.displayName="Edit",t.a=l},Txxr:function(e,t,r){"use strict";var n=r("q1tI");t.a=function(){var e=Object(n.useRef)(!0);return Object(n.useEffect)((function(){return function(){e.current=!1}}),[]),e}},YpyM:function(e,t,r){"use strict";var n=r("nKUr"),a=r("cpVT"),c=r("dhJC"),o=(r("q1tI"),r("ADg1")),i=r("1AYd"),s=r("cVXz"),l=r("jjAL"),j=r("Spdj"),b=r("NKCw"),d=r("eRyV");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.a=function(e){var t=e.name,r=e.label,a=void 0===r?"":r,u=e.options,h=e.setValue,p=e.errorObj,f=void 0===p?{}:p,m=Object(c.a)(e,["name","label","options","setValue","errorObj"]),x=Object(b.useFormContext)().control,g=Object(b.useController)({name:t,control:x}).field,v=g.ref,y=Object(c.a)(g,["ref"]),w=Object(d.a)(t,f),k=w.isError,P=w.errorMessage;return Object(n.jsxs)(o.a,O(O({fullWidth:!0,error:k},m),{},{children:[Object(n.jsx)(i.a,{htmlFor:t,children:a}),Object(n.jsx)(s.a,O(O(O({id:t},y),{},{ref:v},m),{},{onChange:function(e){return h("filter",{id:e.target.value,label:e.target.name})},children:u.map((function(e){return Object(n.jsx)(l.a,{value:e.id,children:e.label},e.id)}))})),k&&Object(n.jsx)(j.a,{error:!0,children:P})]}))}},xGgX:function(e,t,r){"use strict";r.r(t);var n=r("nKUr"),a=r("vJKn"),c=r.n(a),o=r("rg98"),i=r("xvhg"),s=r("q1tI"),l=r.n(s),j=r("20a2"),b=r("R/WZ"),d=r("Ji2X"),u=r("Z3vd"),O=r("HR5l"),h=r("hlFM"),p=r("EBQD"),f=r("sxe4"),m=r("79WI"),x=r("Mya6"),g=r("cpVT"),v=r("dhJC"),y=r("30+C"),w=r("tRbT"),k=r("wb2y"),P=r("/EAt"),I=r("Imu7"),E=r("sRsu"),S=r("3PeG"),C=r("VmPI"),N=r("iae6"),D=r("Uf6+"),M=r("PsDL"),L=r("ELmG"),A=r("iuhU"),T=r("NKQG"),_=r("Fn3X"),q=r("cuOD"),B=r.n(q),R=r("frks"),z=r("2Wm+"),F=r("bgvd"),V=r("UGp+"),W=r("NKCw"),X=r("YpyM"),G=r("sn/O"),J=r("vDqi"),K=r.n(J),H=r("IIOH"),U=r("1NhI"),Y=r("ofer"),Q=r("JoNN"),Z=r("wHH0"),$=r("KcsI");function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){Object(g.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var re=Object(b.a)((function(e){return{root:{padding:e.spacing(2)},actions:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > * + *":{marginLeft:e.spacing(2)}}}}));var ne=function(e){var t=e.className,r=e.onDelete,a=void 0===r?function(){}:r,c=e.onMarkActive,o=void 0===c?function(){}:c,i=e.onMarkInactive,s=void 0===i?function(){}:i,l=e.open,j=void 0!==l&&l,b=e.selected,d=e.isLoading,h=void 0!==d&&d,p=Object(v.a)(e,["className","onDelete","onMarkActive","onMarkInactive","open","selected","isLoading"]),f=re();return Object(n.jsx)(H.a,{anchor:"bottom",open:j,PaperProps:{elevation:1},variant:"persistent",children:Object(n.jsx)("div",te(te({className:Object(A.a)(f.root,t)},p),{},{children:Object(n.jsxs)(w.a,{alignItems:"center",container:!0,spacing:2,children:[Object(n.jsx)(U.a,{smDown:!0,children:Object(n.jsx)(w.a,{item:!0,md:3,children:Object(n.jsxs)(Y.a,{color:"textSecondary",variant:"subtitle1",children:[b.length," selected"]})})}),Object(n.jsx)(w.a,{item:!0,md:6,xs:12,children:Object(n.jsx)("div",{className:f.actions,children:h?Object(n.jsx)(N.a,{}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(u.a,{onClick:o,startIcon:Object(n.jsx)(O.a,{fontSize:"small",children:Object(n.jsx)(Q.a,{})}),children:"Mark Active"}),Object(n.jsx)(u.a,{onClick:s,startIcon:Object(n.jsx)(O.a,{fontSize:"small",children:Object(n.jsx)(Z.a,{})}),children:"Mark Inactive"}),Object(n.jsx)(u.a,{onClick:a,startIcon:Object(n.jsx)(O.a,{fontSize:"small",children:Object(n.jsx)($.a,{})}),children:"Delete"})]})})})]})}))})};function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){Object(g.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var oe=Object(b.a)((function(){return{root:{}}})),ie=V.c().shape({filter:V.c().shape({label:V.e(),id:V.e()}).nullable(),search:V.e()}),se=[{label:"fist name",id:"firstname"},{label:"Last name",id:"lastname"},{label:"Compnay",id:"companyname"},{label:"Phone Number",id:"phonenumber"},{label:"Email address",id:"emailaddress"},{label:"Position",id:"position"}];var le=function(e){var t=e.className,r=e.query,a=e.setquery,s=Object(v.a)(e,["className","query","setquery"]),j=oe(),b=Object(T.b)().enqueueSnackbar,d=l.a.useState(!1),p=Object(i.a)(d,2),f=p[0],m=(p[1],Object(z.a)({query:r})),x=m.selectedItems,g=m.isAllItemsSelected,q=m.isSomeItemsSelected,V=m.page,J=m.limit,H=m.hasNext,U=m.hasPrev,Y=m.isLoading,Q=(m.setItems,m.setSelectedItems,m.enableBulkOperations),Z=m.handleSelectAllItems,$=m.handleSelectOneItem,ee=m.handlePageChange,te=m.handleLimitChange,re=Object(W.useForm)({mode:"all",resolver:Object(F.yupResolver)(ie),defaultValues:{filter:se[0],search:""}}),ae=re.handleSubmit,le=re.errors,je=re.setError,be=re.setValue,de=(re.reset,re.watch,re.formState.isSubmitting);return Object(n.jsxs)("div",ce(ce({className:Object(A.a)(j.root,t)},s),{},{children:[Object(n.jsxs)(y.a,{children:[Object(n.jsx)(W.FormProvider,ce(ce({},re),{},{children:Object(n.jsx)("form",ce(ce({onSubmit:ae(Oe),className:Object(A.a)(j.root,t)},s),{},{children:Object(n.jsxs)(w.a,{container:!0,spacing:3,alignItems:"center",style:{paddingTop:"1rem",margin:"auto"},children:[Object(n.jsx)(w.a,{item:!0,xs:4,children:Object(n.jsx)(X.a,{options:se,name:"filter",label:"Filter",variant:"outlined",setValue:be,errorObj:le})}),Object(n.jsx)(w.a,{item:!0,md:4,xs:6,children:Object(n.jsx)(G.a,{name:"search",label:"Search",variant:"outlined",errorObj:le})}),Object(n.jsxs)(w.a,{item:!0,xs:4,children:[Object(n.jsx)(u.a,{variant:"contained",color:"secondary",type:"button",disabled:de,onClick:ae(Oe),children:"Search"}),Object(n.jsx)(u.a,{variant:"outlined",type:"button",color:"secondary",style:{marginLeft:"1rem"},disabled:de,onClick:function(){!function(){ue.apply(this,arguments)}()},children:"reset"})]})]})}))})),Object(n.jsx)(k.a,{}),Object(n.jsx)(B.a,{children:Object(n.jsx)(h.a,{minWidth:700,children:Object(n.jsxs)(P.a,{children:[Object(n.jsx)(I.a,{children:Object(n.jsxs)(E.a,{children:[Object(n.jsx)(S.a,{padding:"checkbox",children:Object(n.jsx)(C.a,{checked:g,indeterminate:q,onChange:Z})}),Object(n.jsx)(S.a,{children:"Name"}),Object(n.jsx)(S.a,{children:"Company"}),Object(n.jsx)(S.a,{children:"Position"}),Object(n.jsx)(S.a,{children:"Phone Number"}),Object(n.jsx)(S.a,{children:"Email"}),Object(n.jsx)(S.a,{children:"Address"}),Object(n.jsx)(S.a,{align:"right",children:"Actions"})]})}),Y?Object(n.jsx)(h.a,{display:"flex",justifyContent:"center",mt:4,children:Object(n.jsx)(N.a,{})}):Object(n.jsx)(D.a,{children:r.map((function(e){var t=x.includes(e.id);return Object(n.jsxs)(E.a,{hover:!0,selected:-1!==x.indexOf(e.id),children:[Object(n.jsx)(S.a,{padding:"checkbox",children:Object(n.jsx)(C.a,{checked:t,onChange:function(t){return $(t,e.id)},value:t})}),Object(n.jsx)(S.a,{children:"".concat(e.firstname," ").concat(e.lastname)}),Object(n.jsx)(S.a,{children:e.companyname}),Object(n.jsx)(S.a,{children:e.position}),Object(n.jsx)(S.a,{children:e.phonenumber}),Object(n.jsx)(S.a,{children:e.emailaddress}),Object(n.jsx)(S.a,{children:e.address}),Object(n.jsx)(S.a,{align:"right",children:Object(n.jsx)(M.a,{component:R.a,href:"/brokers/".concat(e.id,"/edit"),children:Object(n.jsx)(O.a,{fontSize:"small",children:Object(n.jsx)(_.a,{})})})})]},e.id)}))})]})})}),Object(n.jsx)(L.a,{component:"div",count:-1,onChangePage:ee,onChangeRowsPerPage:te,page:V,rowsPerPage:J,rowsPerPageOptions:[5,10,25],nextIconButtonProps:{disabled:!H},backIconButtonProps:{disabled:!U},labelDisplayedRows:function(e){var t=e.from;return 0==r.length?"0-0":"".concat(t,"-").concat(t+r.length-1)}})]}),Object(n.jsx)(ne,{open:Q,selected:x,isLoading:f,onMarkActive:function(){},onMarkInactive:function(){},onDelete:function(){}})]}));function ue(){return(ue=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{K.a.get("http://localhost:1337/brokers").then((function(e){a(e.data)}))}catch(t){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e){return he.apply(this,arguments)}function he(){return(he=Object(o.a)(c.a.mark((function e(t){var r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.filter,n=t.search;try{be("submitError",""),K.a.get("http://localhost:1337/brokers?_where[".concat(r.id,"_contains]=").concat(n)).then((function(e){console.log(e.data),a(e.data),b("Filter applied",{variant:"success"})})).catch((function(e){b("Error in filtering",{variant:"error"}),console.log(e)}))}catch(c){b("Error in filtering",{variant:"error"}),console.log(c),je("submitError",{type:"submit",message:"Error creating new product."})}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},je=r("Txxr"),be=r("1DBx"),de=Object(b.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)}}})),ue=[{title:"Dashboard",href:"/dashboard"},{title:"Management",href:"#"},{title:"Brokers"}];function Oe(){var e=de(),t=Object(j.useRouter)(),r=Object(je.a)(),a=l.a.useState([]),s=Object(i.a)(a,2),b=s[0],x=s[1],g=l.a.useCallback(Object(o.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.a.get("http://localhost:1337/brokers");case 3:t=e.sent,n=t.data,r.current&&x(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[r]);return l.a.useEffect((function(){g()}),[]),Object(n.jsx)(m.a,{className:e.root,title:"Broker - All",children:Object(n.jsxs)(d.a,{maxWidth:!1,children:[Object(n.jsx)(f.a,{links:ue,mainText:"All Brokers",rightComponent:Object(n.jsx)(u.a,{color:"secondary",variant:"contained",onClick:function(){return t.push("/brokers/create")},className:e.action,startIcon:Object(n.jsx)(O.a,{fontSize:"small",children:Object(n.jsx)(p.a,{})}),children:"New Broker"})}),Object(n.jsx)(h.a,{mt:3,children:Object(n.jsx)(le,{query:b,setquery:x})})]})})}Oe.Guard=x.a,Oe.Layout=be.a;t.default=Oe},"yO+T":function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/brokers",function(){return r("xGgX")}])}},[["yO+T",1,0,4,2,3,5,6,7,8,9,10,11,12,13,14,16]]]);