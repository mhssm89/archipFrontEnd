_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[57],{"8Ekl":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/poqs",function(){return n("9Vn6")}])},"9Vn6":function(e,t,n){"use strict";n.r(t);var r=n("nKUr"),a=n("vJKn"),c=n.n(a),i=n("rg98"),o=n("xvhg"),s=n("q1tI"),l=n.n(s),j=n("20a2"),d=n("R/WZ"),u=n("Ji2X"),b=n("Z3vd"),O=n("HR5l"),h=n("hlFM"),p=n("EBQD"),f=n("sxe4"),x=n("79WI"),m=n("Mya6"),g=n("cpVT"),v=n("dhJC"),y=n("30+C"),w=n("tRbT"),k=n("wb2y"),P=n("/EAt"),I=n("Imu7"),S=n("sRsu"),N=n("3PeG"),D=n("VmPI"),E=n("iae6"),C=n("Uf6+"),q=n("PsDL"),_=n("ELmG"),A=n("kfFl"),T=n("iuhU"),L=n("NKQG"),M=n("KcsI"),z=n("Fn3X"),R=n("lHIJ"),F=n("cuOD"),B=n.n(F),J=n("bgvd"),V=n("UGp+"),H=n("frks"),Q=n("2Wm+"),W=n("IIOH"),G=n("1NhI"),K=n("ofer"),U=n("JoNN"),X=n("wHH0");function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $=Object(d.a)((function(e){return{root:{padding:e.spacing(2)},actions:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > * + *":{marginLeft:e.spacing(2)}}}}));var ee=function(e){var t=e.className,n=e.onDelete,a=void 0===n?function(){}:n,c=e.onMarkActive,i=void 0===c?function(){}:c,o=e.onMarkInactive,s=void 0===o?function(){}:o,l=e.open,j=void 0!==l&&l,d=e.selected,u=e.isLoading,h=void 0!==u&&u,p=Object(v.a)(e,["className","onDelete","onMarkActive","onMarkInactive","open","selected","isLoading"]),f=$();return Object(r.jsx)(W.a,{anchor:"bottom",open:j,PaperProps:{elevation:1},variant:"persistent",children:Object(r.jsx)("div",Y(Y({className:Object(T.a)(f.root,t)},p),{},{children:Object(r.jsxs)(w.a,{alignItems:"center",container:!0,spacing:2,children:[Object(r.jsx)(G.a,{smDown:!0,children:Object(r.jsx)(w.a,{item:!0,md:3,children:Object(r.jsxs)(K.a,{color:"textSecondary",variant:"subtitle1",children:[d.length," selected"]})})}),Object(r.jsx)(w.a,{item:!0,md:6,xs:12,children:Object(r.jsx)("div",{className:f.actions,children:h?Object(r.jsx)(E.a,{}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(b.a,{onClick:i,startIcon:Object(r.jsx)(O.a,{fontSize:"small",children:Object(r.jsx)(U.a,{})}),children:"Mark Active"}),Object(r.jsx)(b.a,{onClick:s,startIcon:Object(r.jsx)(O.a,{fontSize:"small",children:Object(r.jsx)(X.a,{})}),children:"Mark Inactive"}),Object(r.jsx)(b.a,{onClick:a,startIcon:Object(r.jsx)(O.a,{fontSize:"small",children:Object(r.jsx)(M.a,{})}),children:"Delete"})]})})})]})}))})},te=n("NKCw"),ne=n("YpyM"),re=n("sn/O"),ae=n("vDqi"),ce=n.n(ae),ie=n("e5va");function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var le=Object(d.a)((function(){return{root:{}}})),je=V.c().shape({filter:V.c().shape({label:V.e(),id:V.e()}).nullable(),search:V.e()}),de=[{label:"Number",id:"id"},{label:"Customer",id:"customer.firstName"},{label:"Grand Total",id:"grandTotal"}];var ue=function(e){var t=e.className,n=e.query,a=e.setquery,s=Object(v.a)(e,["className","query","setquery"]),j=le(),d=Object(L.b)().enqueueSnackbar,u=l.a.useState(!1),p=Object(o.a)(u,2),f=p[0],x=(p[1],l.a.useState(!1)),m=Object(o.a)(x,2),g=m[0],F=m[1],V=l.a.useState({}),W=Object(o.a)(V,2),G=W[0],K=W[1],U=Object(Q.a)({query:n}),X=U.selectedItems,Z=U.isAllItemsSelected,Y=U.isSomeItemsSelected,$=U.page,ae=U.limit,oe=U.hasNext,ue=U.hasPrev,be=U.isLoading,Oe=(U.setItems,U.setSelectedItems,U.enableBulkOperations),he=U.handleSelectAllItems,pe=U.handleSelectOneItem,fe=U.handlePageChange,xe=U.handleLimitChange,me=Object(te.useForm)({mode:"all",resolver:Object(J.yupResolver)(je),defaultValues:{filter:de[0],search:""}}),ge=me.handleSubmit,ve=me.errors,ye=me.setError,we=me.setValue,ke=(me.reset,me.watch,me.formState.isSubmitting);return Object(r.jsxs)("div",se(se({className:Object(T.a)(j.root,t)},s),{},{children:[Object(r.jsxs)(y.a,{children:[Object(r.jsx)(te.FormProvider,se(se({},me),{},{children:Object(r.jsx)("form",se(se({onSubmit:ge(Ie),className:Object(T.a)(j.root,t)},s),{},{children:Object(r.jsxs)(w.a,{container:!0,spacing:3,alignItems:"center",style:{paddingTop:"1rem",margin:"auto"},children:[Object(r.jsx)(w.a,{item:!0,xs:4,children:Object(r.jsx)(ne.a,{options:de,name:"filter",label:"Filter",variant:"outlined",setValue:we,errorObj:ve})}),Object(r.jsx)(w.a,{item:!0,md:4,xs:6,children:Object(r.jsx)(re.a,{name:"search",label:"Search",variant:"outlined",errorObj:ve})}),Object(r.jsxs)(w.a,{item:!0,xs:4,children:[Object(r.jsx)(b.a,{variant:"contained",color:"secondary",type:"button",disabled:ke,onClick:ge(Ie),children:"Search"}),Object(r.jsx)(b.a,{variant:"outlined",type:"button",color:"secondary",style:{marginLeft:"1rem"},disabled:ke,onClick:function(){!function(){Pe.apply(this,arguments)}()},children:"reset"})]})]})}))})),Object(r.jsx)(k.a,{}),Object(r.jsx)(B.a,{children:Object(r.jsx)(h.a,{minWidth:700,children:Object(r.jsxs)(P.a,{children:[Object(r.jsx)(I.a,{children:Object(r.jsxs)(S.a,{children:[Object(r.jsx)(N.a,{padding:"checkbox",children:Object(r.jsx)(D.a,{checked:Z,indeterminate:Y,onChange:he})}),Object(r.jsx)(N.a,{children:"Number #"}),Object(r.jsx)(N.a,{children:"Customer"}),Object(r.jsx)(N.a,{children:"Expires On"}),Object(r.jsx)(N.a,{children:"Total Cost"}),Object(r.jsx)(N.a,{align:"right",children:"Actions"})]})}),be?Object(r.jsx)(h.a,{display:"flex",justifyContent:"center",mt:4,children:Object(r.jsx)(E.a,{})}):Object(r.jsx)(C.a,{children:n.map((function(e){var t=X.includes(e.id);return Object(r.jsxs)(S.a,{hover:!0,selected:-1!==X.indexOf(e.id),children:[Object(r.jsx)(N.a,{padding:"checkbox",children:Object(r.jsx)(D.a,{checked:t,onChange:function(t){return pe(t,e.id)},value:t})}),Object(r.jsxs)(N.a,{children:[e.id,"- Archip"]}),e.customer?Object(r.jsx)(N.a,{children:e.customer.firstName+" "+e.customer.lastName}):Object(r.jsx)(N.a,{children:"NA"}),Object(r.jsx)(N.a,{children:e.endDate}),Object(r.jsx)(N.a,{children:e.grandTotal}),Object(r.jsxs)(N.a,{align:"right",children:[Object(r.jsx)(q.a,{onClick:function(){return t={id:e.id,name:"".concat(e.id,"- Archip BOQ")},F(!0),void K(t);var t},children:Object(r.jsx)(O.a,{fontSize:"small",children:Object(r.jsx)(M.a,{})})}),Object(r.jsx)(q.a,{component:H.a,href:"/poqs/".concat(e.id,"/edit"),children:Object(r.jsx)(O.a,{fontSize:"small",children:Object(r.jsx)(z.a,{})})}),Object(r.jsx)(q.a,{component:H.a,href:"/poqs/".concat(e.id),children:Object(r.jsx)(O.a,{fontSize:"small",children:Object(r.jsx)(R.a,{})})})]})]},e.id)}))})]})})}),Object(r.jsx)(_.a,{component:"div",count:-1,onChangePage:fe,onChangeRowsPerPage:xe,page:$,rowsPerPage:ae,rowsPerPageOptions:[5,10,25],nextIconButtonProps:{disabled:!oe},backIconButtonProps:{disabled:!ue},labelDisplayedRows:function(e){var t=e.from;return 0==n.length?"0-0":"".concat(t,"-").concat(t+n.length-1)}})]}),Object(r.jsx)(ee,{open:Oe,selected:X,isLoading:f,onMarkActive:function(){},onMarkInactive:function(){},onDelete:function(){}}),Object(r.jsx)(A.a,{open:g,children:Object(r.jsx)(ie.a,{setOpenDialoge:F,deletedValue:G.name,runFunction:function(){return Ne.apply(this,arguments)}})})]}));function Pe(){return(Pe=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{ce.a.get("".concat("http://localhost:1337","/poqs?_where[isDeleted]=0")).then((function(e){a(e.data)}))}catch(t){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e){return Se.apply(this,arguments)}function Se(){return(Se=Object(i.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.filter,r=t.search;try{we("submitError",""),ce.a.get("".concat("http://localhost:1337","/poqs?_where[").concat(n.id,"]=").concat(r,"&[isDeleted]=0")).then((function(e){console.log(e.data),a(e.data),d("Filter applied",{variant:"success"})})).catch((function(e){d("Error in filtering",{variant:"error"}),console.log(e)}))}catch(c){d("Error in filtering",{variant:"error"}),console.log(c),ye("submitError",{type:"submit",message:"Error in filtering"})}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(){return(Ne=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ce.a.put("".concat("http://localhost:1337","/poqs/").concat(G.id),{isDeleted:1}).then((function(e){a(n.filter((function(e){return e.id!=G.id})))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},be=n("Txxr"),Oe=n("1DBx"),he=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)}}})),pe=[{title:"Dashboard",href:"/dashboard"},{title:"Management",href:"#"},{title:"Quotations"}];function fe(){var e=he(),t=Object(j.useRouter)(),n=Object(be.a)(),a=l.a.useState([]),s=Object(o.a)(a,2),d=s[0],m=s[1],g=l.a.useCallback(Object(i.a)(c.a.mark((function e(){var t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce.a.get("".concat("http://localhost:1337","/poqs/?_where[isDeleted]=0"));case 3:t=e.sent,r=t.data,n.current&&m(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[n]);return l.a.useEffect((function(){g()}),[g]),Object(r.jsx)(x.a,{className:e.root,title:"Quotations - All",children:Object(r.jsxs)(u.a,{maxWidth:!1,children:[Object(r.jsx)(f.a,{links:pe,mainText:"All Quotations",rightComponent:Object(r.jsx)(b.a,{color:"secondary",variant:"contained",onClick:function(){return t.push("/poqs/create")},className:e.action,startIcon:Object(r.jsx)(O.a,{fontSize:"small",children:Object(r.jsx)(p.a,{})}),children:"New POQ"})}),Object(r.jsx)(h.a,{mt:3,children:Object(r.jsx)(ue,{query:d,setquery:m})})]})})}fe.Guard=m.a,fe.Layout=Oe.a;t.default=fe},lHIJ:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),c=n("17x9"),i=n.n(c);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=Object(r.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,c=e.size,i=void 0===c?24:c,l=s(e,["color","size"]);return a.a.createElement("svg",o({ref:t,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),a.a.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),a.a.createElement("polyline",{points:"12 5 19 12 12 19"}))}));l.propTypes={color:i.a.string,size:i.a.oneOfType([i.a.string,i.a.number])},l.displayName="ArrowRight",t.a=l}},[["8Ekl",1,0,4,2,3,5,6,7,8,9,10,11,12,13,14,16,18]]]);