_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[71],{NliM:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/suppliers",function(){return n("q8OS")}])},q8OS:function(e,t,n){"use strict";n.r(t);var r=n("nKUr"),c=n("vJKn"),a=n.n(c),i=n("rg98"),s=n("xvhg"),o=n("q1tI"),l=n.n(o),j=n("20a2"),d=n("R/WZ"),u=n("Ji2X"),b=n("Z3vd"),p=n("HR5l"),h=n("hlFM"),O=n("EBQD"),f=n("sxe4"),m=n("79WI"),x=n("Mya6"),g=n("cpVT"),v=n("dhJC"),y=n("30+C"),w=n("tRbT"),k=n("wb2y"),P=n("/EAt"),S=n("Imu7"),N=n("sRsu"),D=n("3PeG"),I=n("VmPI"),C=n("iae6"),E=n("Uf6+"),_=n("PsDL"),M=n("ELmG"),q=n("kfFl"),A=n("iuhU"),L=n("NKQG"),F=n("KcsI"),R=n("Fn3X"),T=n("cuOD"),z=n.n(T),B=n("bgvd"),J=n("UGp+"),V=n("NKCw"),W=n("YpyM"),G=n("sn/O"),H=n("frks"),K=n("2Wm+"),U=n("IIOH"),X=n("1NhI"),Q=n("ofer"),Z=n("JoNN"),Y=n("wHH0");function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=Object(d.a)((function(e){return{root:{padding:e.spacing(2)},actions:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > * + *":{marginLeft:e.spacing(2)}}}}));var ne=function(e){var t=e.className,n=e.onDelete,c=void 0===n?function(){}:n,a=e.onMarkActive,i=void 0===a?function(){}:a,s=e.onMarkInactive,o=void 0===s?function(){}:s,l=e.open,j=void 0!==l&&l,d=e.selected,u=e.isLoading,h=void 0!==u&&u,O=Object(v.a)(e,["className","onDelete","onMarkActive","onMarkInactive","open","selected","isLoading"]),f=te();return Object(r.jsx)(U.a,{anchor:"bottom",open:j,PaperProps:{elevation:1},variant:"persistent",children:Object(r.jsx)("div",ee(ee({className:Object(A.a)(f.root,t)},O),{},{children:Object(r.jsxs)(w.a,{alignItems:"center",container:!0,spacing:2,children:[Object(r.jsx)(X.a,{smDown:!0,children:Object(r.jsx)(w.a,{item:!0,md:3,children:Object(r.jsxs)(Q.a,{color:"textSecondary",variant:"subtitle1",children:[d.length," selected"]})})}),Object(r.jsx)(w.a,{item:!0,md:6,xs:12,children:Object(r.jsx)("div",{className:f.actions,children:h?Object(r.jsx)(C.a,{}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(b.a,{onClick:i,startIcon:Object(r.jsx)(p.a,{fontSize:"small",children:Object(r.jsx)(Z.a,{})}),children:"Mark Active"}),Object(r.jsx)(b.a,{onClick:o,startIcon:Object(r.jsx)(p.a,{fontSize:"small",children:Object(r.jsx)(Y.a,{})}),children:"Mark Inactive"}),Object(r.jsx)(b.a,{onClick:c,startIcon:Object(r.jsx)(p.a,{fontSize:"small",children:Object(r.jsx)(F.a,{})}),children:"Delete"})]})})})]})}))})},re=n("vDqi"),ce=n.n(re),ae=n("e5va");function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe=Object(d.a)((function(){return{root:{}}})),le=J.c().shape({filter:J.c().shape({label:J.e(),id:J.e()}).nullable(),search:J.e()}),je=[{label:"Supplier Name",id:"supplierName"},{label:"Phone Number",id:"phonenumber"},{label:"Email",id:"emailaddress"}];var de=function(e){var t=e.className,n=e.query,c=e.setquery,o=Object(v.a)(e,["className","query","setquery"]),j=oe(),d=Object(L.b)().enqueueSnackbar,u=l.a.useState(!1),O=Object(s.a)(u,2),f=O[0],m=(O[1],l.a.useState(!1)),x=Object(s.a)(m,2),g=x[0],T=x[1],J=l.a.useState({}),U=Object(s.a)(J,2),X=U[0],Q=U[1],Z=Object(K.a)({query:n}),Y=Z.selectedItems,$=Z.isAllItemsSelected,ee=Z.isSomeItemsSelected,te=Z.page,re=Z.limit,ie=Z.hasNext,de=Z.hasPrev,ue=Z.isLoading,be=Z.enableBulkOperations,pe=Z.handleSelectAllItems,he=Z.handleSelectOneItem,Oe=Z.handlePageChange,fe=Z.handleLimitChange,me=Object(V.useForm)({mode:"all",resolver:Object(B.yupResolver)(le),defaultValues:{filter:je[0],search:""}}),xe=me.handleSubmit,ge=me.errors,ve=me.setError,ye=me.setValue,we=(me.reset,me.watch,me.formState.isSubmitting);return Object(r.jsxs)("div",se(se({className:Object(A.a)(j.root,t)},o),{},{children:[Object(r.jsxs)(y.a,{children:[Object(r.jsx)(V.FormProvider,se(se({},me),{},{children:Object(r.jsx)("form",se(se({onSubmit:xe(Pe),className:Object(A.a)(j.root,t)},o),{},{children:Object(r.jsxs)(w.a,{container:!0,spacing:3,alignItems:"center",style:{paddingTop:"1rem",margin:"auto"},children:[Object(r.jsx)(w.a,{item:!0,xs:4,children:Object(r.jsx)(W.a,{options:je,name:"filter",label:"Filter",variant:"outlined",setValue:ye,errorObj:ge})}),Object(r.jsx)(w.a,{item:!0,md:4,xs:6,children:Object(r.jsx)(G.a,{name:"search",label:"Search",variant:"outlined",errorObj:ge})}),Object(r.jsxs)(w.a,{item:!0,xs:4,children:[Object(r.jsx)(b.a,{variant:"contained",color:"secondary",type:"button",disabled:we,onClick:xe(Pe),children:"Search"}),Object(r.jsx)(b.a,{variant:"outlined",type:"button",color:"secondary",style:{marginLeft:"1rem"},disabled:we,onClick:function(){!function(){ke.apply(this,arguments)}()},children:"reset"})]})]})}))})),Object(r.jsx)(k.a,{}),Object(r.jsx)(z.a,{children:Object(r.jsx)(h.a,{minWidth:700,children:Object(r.jsxs)(P.a,{children:[Object(r.jsx)(S.a,{children:Object(r.jsxs)(N.a,{children:[Object(r.jsx)(D.a,{padding:"checkbox",children:Object(r.jsx)(I.a,{checked:$,indeterminate:ee,onChange:pe})}),Object(r.jsx)(D.a,{children:"Name"}),Object(r.jsx)(D.a,{children:"Phone Number"}),Object(r.jsx)(D.a,{children:"Email"}),Object(r.jsx)(D.a,{children:"Description"}),Object(r.jsx)(D.a,{align:"right",children:"Actions"})]})}),ue?Object(r.jsx)(h.a,{display:"flex",justifyContent:"center",mt:4,children:Object(r.jsx)(C.a,{})}):Object(r.jsx)(E.a,{children:n.map((function(e){var t=Y.includes(e.id);return Object(r.jsxs)(N.a,{hover:!0,selected:-1!==Y.indexOf(e.id),children:[Object(r.jsx)(D.a,{padding:"checkbox",children:Object(r.jsx)(I.a,{checked:t,onChange:function(t){return he(t,e.id)},value:t})}),Object(r.jsx)(D.a,{children:e.supplierName}),Object(r.jsx)(D.a,{children:e.phonenumber}),Object(r.jsx)(D.a,{children:e.emailaddress}),Object(r.jsx)(D.a,{children:e.description}),Object(r.jsxs)(D.a,{align:"right",children:[Object(r.jsx)(_.a,{onClick:function(){return t={id:e.id,name:e.name},T(!0),void Q(t);var t},children:Object(r.jsx)(p.a,{fontSize:"small",children:Object(r.jsx)(F.a,{})})}),Object(r.jsx)(_.a,{component:H.a,href:"/suppliers/".concat(e.id,"/edit"),children:Object(r.jsx)(p.a,{fontSize:"small",children:Object(r.jsx)(R.a,{})})})]})]},e.id)}))})]})})}),Object(r.jsx)(M.a,{component:"div",count:-1,onChangePage:Oe,onChangeRowsPerPage:fe,page:te,rowsPerPage:re,rowsPerPageOptions:[5,10,25],nextIconButtonProps:{disabled:!ie},backIconButtonProps:{disabled:!de},labelDisplayedRows:function(e){var t=e.from;return 0==n.length?"0-0":"".concat(t,"-").concat(t+n.length-1)}})]}),Object(r.jsx)(ne,{open:be,selected:Y,isLoading:f,onMarkActive:function(){},onMarkInactive:function(){},onDelete:function(){}}),Object(r.jsx)(q.a,{open:g,children:Object(r.jsx)(ae.a,{setOpenDialoge:T,deletedValue:X.name,runFunction:function(){return Ne.apply(this,arguments)}})})]}));function ke(){return(ke=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{ce.a.get("".concat("https://dry-journey-56904.herokuapp.com","/suppliers?_where[isDeleted]=0")).then((function(e){c(e.data)}))}catch(t){}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e){return Se.apply(this,arguments)}function Se(){return(Se=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.filter,r=t.search;try{ye("submitError",""),ce.a.get("".concat("https://dry-journey-56904.herokuapp.com","/suppliers?_where[").concat(n.id,"_contains]=").concat(r,"&[isDeleted]=0")).then((function(e){console.log(e.data),c(e.data),d("Filter applied",{variant:"success"})})).catch((function(e){d("Error in filtering",{variant:"error"}),console.log(e)}))}catch(a){d("Error in filtering",{variant:"error"}),console.log(a),ve("submitError",{type:"submit",message:"Error creating new product."})}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(){return(Ne=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ce.a.put("".concat("https://dry-journey-56904.herokuapp.com","/suppliers/").concat(X.id),{isDeleted:1}).then((function(e){c(n.filter((function(e){return e.id!=X.id})))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},ue=n("Txxr"),be=n("1DBx"),pe=Object(d.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingTop:e.spacing(3),paddingBottom:e.spacing(3)}}})),he=[{title:"Dashboard",href:"/dashboard"},{title:"Management",href:"#"},{title:"suppliers"}];function Oe(){var e=pe(),t=Object(j.useRouter)(),n=Object(ue.a)(),c=l.a.useState([]),o=Object(s.a)(c,2),d=o[0],x=o[1],g=l.a.useCallback(Object(i.a)(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce.a.get("".concat("https://dry-journey-56904.herokuapp.com","/suppliers/?_where[isDeleted]=0"));case 3:t=e.sent,r=t.data,n.current&&x(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[n]);return l.a.useEffect((function(){g()}),[g]),Object(r.jsx)(m.a,{className:e.root,title:"Suppliers - All",children:Object(r.jsxs)(u.a,{maxWidth:!1,children:[Object(r.jsx)(f.a,{links:he,mainText:"All Suppliers",rightComponent:Object(r.jsx)(b.a,{color:"secondary",variant:"contained",onClick:function(){return t.push("/suppliers/create")},className:e.action,startIcon:Object(r.jsx)(p.a,{fontSize:"small",children:Object(r.jsx)(O.a,{})}),children:"New Supplier"})}),Object(r.jsx)(h.a,{mt:3,children:Object(r.jsx)(de,{query:d,setquery:x})})]})})}Oe.Guard=x.a,Oe.Layout=be.a;t.default=Oe}},[["NliM",1,0,5,2,3,4,6,8,7,9,10,11,12,13,14,16,18]]]);